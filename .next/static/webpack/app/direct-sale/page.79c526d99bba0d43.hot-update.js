"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/direct-sale/page",{

/***/ "(app-pages-browser)/./src/app/direct-sale/page.tsx":
/*!**************************************!*\
  !*** ./src/app/direct-sale/page.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ DirectSalePage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"(app-pages-browser)/./node_modules/date-fns/format.mjs\");\n/* harmony import */ var _components_ui_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ui/card */ \"(app-pages-browser)/./src/components/ui/card.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./src/components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./src/components/ui/input.tsx\");\n/* harmony import */ var _components_ui_label__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/label */ \"(app-pages-browser)/./src/components/ui/label.tsx\");\n/* harmony import */ var _components_ui_separator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/separator */ \"(app-pages-browser)/./src/components/ui/separator.tsx\");\n/* harmony import */ var _components_ui_textarea__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ui/textarea */ \"(app-pages-browser)/./src/components/ui/textarea.tsx\");\n/* harmony import */ var _components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ui/dialog */ \"(app-pages-browser)/./src/components/ui/dialog.tsx\");\n/* harmony import */ var _components_ui_popover__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/ui/popover */ \"(app-pages-browser)/./src/components/ui/popover.tsx\");\n/* harmony import */ var _components_ui_calendar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/ui/calendar */ \"(app-pages-browser)/./src/components/ui/calendar.tsx\");\n/* harmony import */ var _hooks_use_toast__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/hooks/use-toast */ \"(app-pages-browser)/./src/hooks/use-toast.ts\");\n/* harmony import */ var _barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarIcon,Printer,ShieldAlert,ShoppingBag,Trash2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/shield-alert.js\");\n/* harmony import */ var _barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarIcon,Printer,ShieldAlert,ShoppingBag,Trash2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/shopping-bag.js\");\n/* harmony import */ var _barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarIcon,Printer,ShieldAlert,ShoppingBag,Trash2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/calendar.js\");\n/* harmony import */ var _barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarIcon,Printer,ShieldAlert,ShoppingBag,Trash2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* harmony import */ var _barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! __barrel_optimize__?names=CalendarIcon,Printer,ShieldAlert,ShoppingBag,Trash2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/printer.js\");\n/* harmony import */ var _components_invoice__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/components/invoice */ \"(app-pages-browser)/./src/components/invoice.tsx\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./src/lib/utils.ts\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _components_ui_table__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/components/ui/table */ \"(app-pages-browser)/./src/components/ui/table.tsx\");\n/* harmony import */ var _contexts_company_context__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/contexts/company-context */ \"(app-pages-browser)/./src/contexts/company-context.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction DirectSalePage() {\n    _s();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_14__.useRouter)();\n    const { toast } = (0,_hooks_use_toast__WEBPACK_IMPORTED_MODULE_11__.useToast)();\n    const { activeCompany } = (0,_contexts_company_context__WEBPACK_IMPORTED_MODULE_16__.useCompany)();\n    const [allDebtors, setAllDebtors] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [stockItems, setStockItems] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [customerSuggestions, setCustomerSuggestions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [itemSuggestions, setItemSuggestions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [customerName, setCustomerName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [shippingAddress, setShippingAddress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [selectedCustomerId, setSelectedCustomerId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [saleItems, setSaleItems] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [gstRate, setGstRate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(18);\n    const [saleDate, setSaleDate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Date());\n    const [narration, setNarration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [invoiceOrder, setInvoiceOrder] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [activeItemInput, setActiveItemInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasAccess, setHasAccess] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const role = localStorage.getItem(\"userRole\");\n        if (role === \"owner\" || role === \"factory\" || role === \"administrator\") {\n            setHasAccess(true);\n        }\n        setIsLoading(false);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeCompany) {\n            setAllDebtors([]);\n            setStockItems([]);\n            return;\n        }\n        const companyId = activeCompany.id;\n        const ledgersJson = localStorage.getItem(\"ledgers_\".concat(companyId));\n        const ledgers = ledgersJson ? JSON.parse(ledgersJson) : [];\n        setAllDebtors(ledgers.filter((c)=>c.group === \"Sundry Debtors\"));\n        const stockItemsJson = localStorage.getItem(\"stock_items_\".concat(companyId));\n        setStockItems(stockItemsJson ? JSON.parse(stockItemsJson) : []);\n        addSaleItem();\n    }, [\n        activeCompany\n    ]);\n    const handleNameChange = (e)=>{\n        const value = e.target.value;\n        setCustomerName(value);\n        if (value.length > 1) {\n            const filtered = allDebtors.filter((c)=>c.name.toLowerCase().includes(value.toLowerCase()));\n            setCustomerSuggestions(filtered);\n        } else {\n            setCustomerSuggestions([]);\n        }\n    };\n    const handleSelectCustomer = (customer)=>{\n        setCustomerName(customer.name);\n        setShippingAddress(customer.address || \"\");\n        setSelectedCustomerId(customer.id);\n        setCustomerSuggestions([]);\n    };\n    const addSaleItem = ()=>{\n        setSaleItems((current)=>[\n                ...current,\n                {\n                    key: \"item-\".concat(Date.now()),\n                    stockItemId: \"\",\n                    sku: \"\",\n                    name: \"\",\n                    hsn: \"\",\n                    quantity: \"\",\n                    price: \"\",\n                    available: 0\n                }\n            ]);\n    };\n    const removeSaleItem = (key)=>{\n        setSaleItems((current)=>current.filter((item)=>item.key !== key));\n    };\n    const handleItemChange = (key, field, value)=>{\n        setSaleItems((current)=>current.map((item)=>{\n                if (item.key === key) {\n                    const updatedItem = {\n                        ...item,\n                        [field]: value\n                    };\n                    if (field === \"name\") {\n                        updatedItem.stockItemId = \"\";\n                        const searchVal = String(value).toLowerCase();\n                        if (searchVal) {\n                            setItemSuggestions(stockItems.filter((s)=>s.name.toLowerCase().includes(searchVal) && s.quantity > 0));\n                        } else {\n                            setItemSuggestions([]);\n                        }\n                    }\n                    if (field === \"stockItemId\") {\n                        const selectedStock = stockItems.find((s)=>s.id === value);\n                        if (selectedStock) {\n                            updatedItem.name = selectedStock.name;\n                            updatedItem.sku = selectedStock.sku;\n                            updatedItem.available = selectedStock.quantity;\n                        }\n                    }\n                    if (field === \"quantity\" && typeof value === \"number\" && updatedItem.available > 0 && value > updatedItem.available) {\n                        toast({\n                            variant: \"destructive\",\n                            title: \"Stock Limit Exceeded\",\n                            description: \"Only \".concat(updatedItem.available, \" units of \").concat(updatedItem.name, \" are available.\")\n                        });\n                        return {\n                            ...updatedItem,\n                            quantity: updatedItem.available\n                        };\n                    }\n                    return updatedItem;\n                }\n                return item;\n            }));\n    };\n    const { subTotal, sgstAmount, cgstAmount, totalGstAmount, totalAmount } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const sub = saleItems.reduce((acc, item)=>{\n            const quantity = typeof item.quantity === \"number\" ? item.quantity : 0;\n            const price = typeof item.price === \"number\" ? item.price : 0;\n            return acc + quantity * price;\n        }, 0);\n        const gst = sub * (gstRate / 100);\n        const total = sub + gst;\n        return {\n            subTotal: sub,\n            sgstAmount: gst / 2,\n            cgstAmount: gst / 2,\n            totalGstAmount: gst,\n            totalAmount: total\n        };\n    }, [\n        saleItems,\n        gstRate\n    ]);\n    const handleSubmit = async ()=>{\n        if (!activeCompany) {\n            toast({\n                variant: \"destructive\",\n                title: \"No Active Company\",\n                description: \"Please select a company before creating a sale.\"\n            });\n            return;\n        }\n        if (!customerName || !shippingAddress) {\n            toast({\n                variant: \"destructive\",\n                title: \"Missing Customer\",\n                description: \"Please select or enter customer details.\"\n            });\n            return;\n        }\n        const validSaleItems = saleItems.filter((item)=>(item.quantity || 0) > 0 && (item.price || 0) >= 0 && item.stockItemId);\n        if (validSaleItems.length === 0) {\n            toast({\n                variant: \"destructive\",\n                title: \"Invalid Items\",\n                description: \"Please add items with valid quantity and price.\"\n            });\n            return;\n        }\n        if (!saleDate) {\n            toast({\n                variant: \"destructive\",\n                title: \"Missing Date\",\n                description: \"Please select a sale date.\"\n            });\n            return;\n        }\n        try {\n            const ledgersJson = localStorage.getItem(\"ledgers_\".concat(activeCompany.id));\n            let ledgers = ledgersJson ? JSON.parse(ledgersJson) : [];\n            let customer = ledgers.find((c)=>c.name.toLowerCase() === customerName.toLowerCase());\n            let customerId = selectedCustomerId;\n            if (!customer) {\n                customerId = \"LEDG-\".concat(Date.now());\n                const newLedger = {\n                    id: customerId,\n                    name: customerName,\n                    group: \"Sundry Debtors\",\n                    address: shippingAddress,\n                    email: \"\"\n                };\n                ledgers.push(newLedger);\n            } else {\n                customerId = customer.id;\n                customer.address = shippingAddress;\n                ledgers = ledgers.map((l)=>l.id === customerId ? customer : l);\n            }\n            localStorage.setItem(\"ledgers_\".concat(activeCompany.id), JSON.stringify(ledgers));\n            const invoiceDate = saleDate.toISOString();\n            const invoiceNumber = \"INV-\".concat(new Date().getTime());\n            const lineItems = validSaleItems.map((item)=>({\n                    id: item.stockItemId,\n                    description: \"\".concat(item.name, \" (\").concat(item.sku, \")\"),\n                    quantity: Number(item.quantity),\n                    price: Number(item.price),\n                    hsn: item.hsn\n                }));\n            const orderDetails = lineItems.map((item)=>\"\".concat(item.quantity, \"x \").concat(item.description)).join(\"\\n\");\n            const allOrdersJson = localStorage.getItem(\"orders_\".concat(activeCompany.id));\n            const allOrders = allOrdersJson ? JSON.parse(allOrdersJson) : [];\n            const orderId = \"ord-\".concat(Date.now());\n            const newOrderData = {\n                id: orderId,\n                customer: customerName,\n                item: \"Direct Stock Sale\",\n                status: \"Billed\",\n                type: \"Dealer\",\n                details: orderDetails,\n                createdBy: localStorage.getItem(\"loggedInUser\") || undefined,\n                createdAt: invoiceDate,\n                customerInfo: {\n                    id: customerId,\n                    name: customerName,\n                    address: shippingAddress\n                },\n                invoiceNumber,\n                invoiceDate,\n                lineItems,\n                subTotal,\n                totalGstRate: gstRate,\n                sgstAmount,\n                cgstAmount,\n                totalGstAmount,\n                totalAmount,\n                payments: [],\n                paidAmount: 0,\n                balanceDue: totalAmount,\n                paymentStatus: totalAmount > 0 ? \"Unpaid\" : \"Paid\",\n                stockDeducted: true,\n                irn: \"IRN-MOCK-\".concat(new Date().getTime()),\n                qrCodeUrl: \"https://placehold.co/100x100.png\"\n            };\n            allOrders.push(newOrderData);\n            localStorage.setItem(\"orders_\".concat(activeCompany.id), JSON.stringify(allOrders));\n            const getStatus = (quantity, reorderLevel)=>{\n                if (quantity <= 0) return \"Out of Stock\";\n                if (quantity > 0 && quantity <= reorderLevel) return \"Low Stock\";\n                return \"In Stock\";\n            };\n            const allStockJson = localStorage.getItem(\"stock_items_\".concat(activeCompany.id));\n            let allStock = allStockJson ? JSON.parse(allStockJson) : [];\n            validSaleItems.forEach((item)=>{\n                allStock = allStock.map((si)=>{\n                    if (si.id === item.stockItemId) {\n                        const newQuantity = si.quantity - Number(item.quantity);\n                        return {\n                            ...si,\n                            quantity: newQuantity,\n                            status: getStatus(newQuantity, si.reorderLevel)\n                        };\n                    }\n                    return si;\n                });\n            });\n            localStorage.setItem(\"stock_items_\".concat(activeCompany.id), JSON.stringify(allStock));\n            setStockItems(allStock);\n            const ledgerEntriesJson = localStorage.getItem(\"ledger_entries_\".concat(activeCompany.id));\n            const ledgerEntries = ledgerEntriesJson ? JSON.parse(ledgerEntriesJson) : [];\n            const customerDebitEntry = {\n                id: \"le-\".concat(Date.now(), \"-1\"),\n                date: invoiceDate,\n                accountId: customerId,\n                accountName: customerName,\n                type: \"Sales\",\n                details: \"Invoice \".concat(invoiceNumber),\n                debit: totalAmount,\n                credit: 0,\n                refId: orderId\n            };\n            const salesCreditEntry = {\n                id: \"le-\".concat(Date.now(), \"-2\"),\n                date: invoiceDate,\n                accountId: \"SALES_ACCOUNT\",\n                accountName: \"Sales Account\",\n                type: \"Sales\",\n                details: \"Against Inv \".concat(invoiceNumber, \" to \").concat(customerName),\n                debit: 0,\n                credit: totalAmount,\n                refId: orderId\n            };\n            ledgerEntries.push(customerDebitEntry, salesCreditEntry);\n            localStorage.setItem(\"ledger_entries_\".concat(activeCompany.id), JSON.stringify(ledgerEntries));\n            setInvoiceOrder(newOrderData);\n            toast({\n                title: \"Sale Recorded!\",\n                description: \"Invoice \".concat(invoiceNumber, \" created.\")\n            });\n            setCustomerName(\"\");\n            setShippingAddress(\"\");\n            setSelectedCustomerId(null);\n            setSaleItems([\n                {\n                    key: \"item-\".concat(Date.now()),\n                    stockItemId: \"\",\n                    sku: \"\",\n                    name: \"\",\n                    hsn: \"\",\n                    quantity: \"\",\n                    price: \"\",\n                    available: 0\n                }\n            ]);\n            setSaleDate(new Date());\n            setNarration(\"\");\n        } catch (error) {\n            toast({\n                variant: \"destructive\",\n                title: \"Failed to record sale\",\n                description: error.message\n            });\n        }\n    };\n    const handlePrint = ()=>window.print();\n    const totalQuantity = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>saleItems.reduce((acc, item)=>acc + Number(item.quantity || 0), 0), [\n        saleItems\n    ]);\n    if (isLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex-1 space-y-4 p-4 md:p-8 pt-6\",\n            children: \"Loading...\"\n        }, void 0, false, {\n            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n            lineNumber: 293,\n            columnNumber: 12\n        }, this);\n    }\n    if (!hasAccess) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col items-center justify-center min-h-[80vh] text-center p-4\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.Card, {\n                className: \"max-w-md\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardHeader, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardTitle, {\n                            className: \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                                    className: \"text-destructive\"\n                                }, void 0, false, {\n                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                    lineNumber: 302,\n                                    columnNumber: 15\n                                }, this),\n                                \" Access Denied\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                            lineNumber: 301,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 300,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardContent, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            children: \"You do not have permission to view this page.\"\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                            lineNumber: 305,\n                            columnNumber: 24\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 305,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardFooter, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                            onClick: ()=>router.push(\"/\"),\n                            children: \"Return to Dashboard\"\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                            lineNumber: 306,\n                            columnNumber: 23\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 306,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                lineNumber: 299,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n            lineNumber: 298,\n            columnNumber: 7\n        }, this);\n    }\n    if (!activeCompany) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col items-center justify-center min-h-[80vh] text-center p-4\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.Card, {\n                className: \"max-w-md\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardHeader, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardTitle, {\n                            children: \"No Company Selected\"\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                            lineNumber: 317,\n                            columnNumber: 15\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 316,\n                        columnNumber: 13\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardContent, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            children: \"Please select or create a company to manage sales.\"\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                            lineNumber: 319,\n                            columnNumber: 26\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 319,\n                        columnNumber: 13\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardFooter, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                            onClick: ()=>router.push(\"/manage-companies\"),\n                            children: \"Go to Companies\"\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                            lineNumber: 320,\n                            columnNumber: 25\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 320,\n                        columnNumber: 13\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                lineNumber: 315,\n                columnNumber: 11\n            }, this)\n        }, void 0, false, {\n            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n            lineNumber: 314,\n            columnNumber: 9\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 space-y-4 p-4 md:p-8 pt-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                                className: \"h-7 w-7\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                lineNumber: 330,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"text-3xl font-bold tracking-tight\",\n                                children: \"Direct Stock Sale\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                lineNumber: 331,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 329,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-muted-foreground\",\n                        children: \"Sell items directly from your finished goods inventory.\"\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 333,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_separator__WEBPACK_IMPORTED_MODULE_6__.Separator, {}, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 336,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.Card, {\n                        className: \"mt-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardHeader, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardTitle, {\n                                        children: \"Create Sale\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                        lineNumber: 340,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardDescription, {\n                                        children: \"Fill in customer and item details to generate an invoice instantly.\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                        lineNumber: 341,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                lineNumber: 339,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardContent, {\n                                className: \"space-y-6\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid md:grid-cols-2 gap-4 items-end\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"space-y-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_5__.Label, {\n                                                        htmlFor: \"name\",\n                                                        children: \"Customer Name\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 346,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"relative\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                                                id: \"name\",\n                                                                name: \"name\",\n                                                                required: true,\n                                                                value: customerName,\n                                                                onChange: handleNameChange,\n                                                                onBlur: ()=>setTimeout(()=>setCustomerSuggestions([]), 150),\n                                                                autoComplete: \"off\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 348,\n                                                                columnNumber: 29\n                                                            }, this),\n                                                            customerSuggestions.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"absolute z-10 w-full mt-1 bg-card border rounded-md shadow-lg\",\n                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"flex flex-col gap-1 p-1 max-h-60 overflow-y-auto\",\n                                                                    children: customerSuggestions.map((c)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                            type: \"button\",\n                                                                            className: \"w-full text-left p-2 rounded-md hover:bg-muted\",\n                                                                            onClick: ()=>handleSelectCustomer(c),\n                                                                            children: c.name\n                                                                        }, c.id, false, {\n                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                            lineNumber: 352,\n                                                                            columnNumber: 73\n                                                                        }, this))\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                    lineNumber: 351,\n                                                                    columnNumber: 37\n                                                                }, this)\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 350,\n                                                                columnNumber: 33\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 347,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                lineNumber: 345,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"space-y-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_5__.Label, {\n                                                        htmlFor: \"saleDate\",\n                                                        children: \"Sale Date\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 359,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_9__.Popover, {\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_9__.PopoverTrigger, {\n                                                                asChild: true,\n                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                                                    variant: \"outline\",\n                                                                    className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_13__.cn)(\"w-full justify-start text-left font-normal\", !saleDate && \"text-muted-foreground\"),\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                                                            className: \"mr-2 h-4 w-4\"\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                            lineNumber: 363,\n                                                                            columnNumber: 37\n                                                                        }, this),\n                                                                        saleDate ? (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_20__.format)(saleDate, \"PPP\") : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                            children: \"Pick a date\"\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                            lineNumber: 364,\n                                                                            columnNumber: 75\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                    lineNumber: 362,\n                                                                    columnNumber: 33\n                                                                }, this)\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 361,\n                                                                columnNumber: 29\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_9__.PopoverContent, {\n                                                                className: \"w-auto p-0\",\n                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_calendar__WEBPACK_IMPORTED_MODULE_10__.Calendar, {\n                                                                    mode: \"single\",\n                                                                    selected: saleDate,\n                                                                    onSelect: setSaleDate,\n                                                                    initialFocus: true\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                    lineNumber: 367,\n                                                                    columnNumber: 68\n                                                                }, this)\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 367,\n                                                                columnNumber: 29\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 360,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                lineNumber: 358,\n                                                columnNumber: 22\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                        lineNumber: 344,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_5__.Label, {\n                                                htmlFor: \"address\",\n                                                children: \"Shipping Address\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                lineNumber: 373,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_7__.Textarea, {\n                                                id: \"address\",\n                                                name: \"address\",\n                                                required: true,\n                                                value: shippingAddress,\n                                                onChange: (e)=>setShippingAddress(e.target.value),\n                                                rows: 2\n                                            }, void 0, false, {\n                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                lineNumber: 374,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                        lineNumber: 372,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_5__.Label, {\n                                                children: \"Sale Items\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                lineNumber: 378,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"rounded-md border\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.Table, {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableHeader, {\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableRow, {\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableHead, {\n                                                                        className: \"w-[40%]\",\n                                                                        children: \"Item\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                        lineNumber: 383,\n                                                                        columnNumber: 37\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableHead, {\n                                                                        children: \"HSN/SAC\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                        lineNumber: 384,\n                                                                        columnNumber: 37\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableHead, {\n                                                                        children: \"Qty\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                        lineNumber: 385,\n                                                                        columnNumber: 37\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableHead, {\n                                                                        children: \"Rate\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                        lineNumber: 386,\n                                                                        columnNumber: 37\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableHead, {\n                                                                        className: \"text-right\",\n                                                                        children: \"Amount\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                        lineNumber: 387,\n                                                                        columnNumber: 37\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableHead, {\n                                                                        className: \"w-[50px]\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                        lineNumber: 388,\n                                                                        columnNumber: 37\n                                                                    }, this)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 382,\n                                                                columnNumber: 33\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                            lineNumber: 381,\n                                                            columnNumber: 29\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableBody, {\n                                                            children: saleItems.map((item, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableRow, {\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableCell, {\n                                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                                className: \"relative\",\n                                                                                children: [\n                                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                                                                        placeholder: \"Type to search item\",\n                                                                                        value: item.name,\n                                                                                        onChange: (e)=>handleItemChange(item.key, \"name\", e.target.value),\n                                                                                        onFocus: ()=>setActiveItemInput(item.key),\n                                                                                        onBlur: ()=>setTimeout(()=>{\n                                                                                                setActiveItemInput(null);\n                                                                                                setItemSuggestions([]);\n                                                                                            }, 150),\n                                                                                        autoComplete: \"off\",\n                                                                                        required: true\n                                                                                    }, void 0, false, {\n                                                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                        lineNumber: 396,\n                                                                                        columnNumber: 49\n                                                                                    }, this),\n                                                                                    activeItemInput === item.key && itemSuggestions.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                                        className: \"absolute z-20 w-full mt-1 bg-card border rounded-md shadow-lg\",\n                                                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                                            className: \"flex flex-col gap-1 p-1 max-h-60 overflow-y-auto\",\n                                                                                            children: itemSuggestions.map((s)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                                                    className: \"p-2 hover:bg-muted rounded-md cursor-pointer\",\n                                                                                                    onMouseDown: ()=>{\n                                                                                                        handleItemChange(item.key, \"stockItemId\", s.id);\n                                                                                                        setItemSuggestions([]);\n                                                                                                    },\n                                                                                                    children: [\n                                                                                                        s.name,\n                                                                                                        \" (Available: \",\n                                                                                                        s.quantity,\n                                                                                                        \")\"\n                                                                                                    ]\n                                                                                                }, s.id, true, {\n                                                                                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                                    lineNumber: 409,\n                                                                                                    columnNumber: 65\n                                                                                                }, this))\n                                                                                        }, void 0, false, {\n                                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                            lineNumber: 407,\n                                                                                            columnNumber: 57\n                                                                                        }, this)\n                                                                                    }, void 0, false, {\n                                                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                        lineNumber: 406,\n                                                                                        columnNumber: 53\n                                                                                    }, this)\n                                                                                ]\n                                                                            }, void 0, true, {\n                                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                lineNumber: 395,\n                                                                                columnNumber: 45\n                                                                            }, this)\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                            lineNumber: 394,\n                                                                            columnNumber: 41\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableCell, {\n                                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                                                                placeholder: \"HSN\",\n                                                                                value: item.hsn,\n                                                                                onChange: (e)=>handleItemChange(item.key, \"hsn\", e.target.value)\n                                                                            }, void 0, false, {\n                                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                lineNumber: 418,\n                                                                                columnNumber: 52\n                                                                            }, this)\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                            lineNumber: 418,\n                                                                            columnNumber: 41\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableCell, {\n                                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                                                                type: \"number\",\n                                                                                value: item.quantity,\n                                                                                onChange: (e)=>handleItemChange(item.key, \"quantity\", parseFloat(e.target.value) || \"\"),\n                                                                                min: \"1\",\n                                                                                max: item.available || undefined,\n                                                                                className: \"text-right\",\n                                                                                placeholder: \"0\"\n                                                                            }, void 0, false, {\n                                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                lineNumber: 419,\n                                                                                columnNumber: 52\n                                                                            }, this)\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                            lineNumber: 419,\n                                                                            columnNumber: 41\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableCell, {\n                                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                                                                type: \"number\",\n                                                                                value: item.price,\n                                                                                onChange: (e)=>handleItemChange(item.key, \"price\", parseFloat(e.target.value) || \"\"),\n                                                                                min: \"0\",\n                                                                                className: \"text-right\",\n                                                                                placeholder: \"0.00\"\n                                                                            }, void 0, false, {\n                                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                lineNumber: 420,\n                                                                                columnNumber: 52\n                                                                            }, this)\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                            lineNumber: 420,\n                                                                            columnNumber: 41\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableCell, {\n                                                                            className: \"text-right font-mono\",\n                                                                            children: [\n                                                                                \"₹\",\n                                                                                ((Number(item.quantity) || 0) * (Number(item.price) || 0)).toFixed(2)\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                            lineNumber: 421,\n                                                                            columnNumber: 41\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_table__WEBPACK_IMPORTED_MODULE_15__.TableCell, {\n                                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                                                                variant: \"ghost\",\n                                                                                size: \"icon\",\n                                                                                onClick: ()=>removeSaleItem(item.key),\n                                                                                className: \"text-destructive\",\n                                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n                                                                                    className: \"h-4 w-4\"\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                    lineNumber: 422,\n                                                                                    columnNumber: 158\n                                                                                }, this)\n                                                                            }, void 0, false, {\n                                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                                lineNumber: 422,\n                                                                                columnNumber: 52\n                                                                            }, this)\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                            lineNumber: 422,\n                                                                            columnNumber: 41\n                                                                        }, this)\n                                                                    ]\n                                                                }, item.key, true, {\n                                                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                    lineNumber: 393,\n                                                                    columnNumber: 37\n                                                                }, this))\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                            lineNumber: 391,\n                                                            columnNumber: 29\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                    lineNumber: 380,\n                                                    columnNumber: 25\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                lineNumber: 379,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                                variant: \"outline\",\n                                                size: \"sm\",\n                                                onClick: addSaleItem,\n                                                className: \"mt-2\",\n                                                children: \"Add Row\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                lineNumber: 428,\n                                                columnNumber: 22\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                        lineNumber: 377,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_separator__WEBPACK_IMPORTED_MODULE_6__.Separator, {}, void 0, false, {\n                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                        lineNumber: 431,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-start justify-between gap-4 pt-4\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex-grow space-y-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_5__.Label, {\n                                                        htmlFor: \"narration\",\n                                                        children: \"Narration\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 435,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_7__.Textarea, {\n                                                        id: \"narration\",\n                                                        value: narration,\n                                                        onChange: (e)=>setNarration(e.target.value),\n                                                        rows: 4,\n                                                        className: \"w-full max-w-md\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 436,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                lineNumber: 434,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"w-full max-w-sm space-y-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardTitle, {\n                                                        className: \"text-lg\",\n                                                        children: \"Summary\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 439,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex justify-between text-sm\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"text-muted-foreground\",\n                                                                children: \"Total Quantity\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 441,\n                                                                columnNumber: 29\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"font-mono\",\n                                                                children: totalQuantity.toFixed(2)\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 442,\n                                                                columnNumber: 29\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 440,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex justify-between text-sm\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"text-muted-foreground\",\n                                                                children: \"Subtotal\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 445,\n                                                                columnNumber: 29\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"font-mono\",\n                                                                children: [\n                                                                    \"₹\",\n                                                                    subTotal.toFixed(2)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 446,\n                                                                columnNumber: 29\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 444,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex items-center justify-between gap-4 text-sm\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_5__.Label, {\n                                                                htmlFor: \"gstRate\",\n                                                                className: \"whitespace-nowrap text-muted-foreground\",\n                                                                children: \"GST Rate (%)\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 449,\n                                                                columnNumber: 29\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                                                id: \"gstRate\",\n                                                                type: \"number\",\n                                                                value: gstRate,\n                                                                onChange: (e)=>setGstRate(parseFloat(e.target.value) || 0),\n                                                                className: \"w-24 h-8\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 450,\n                                                                columnNumber: 29\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 448,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex justify-between text-sm\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"text-muted-foreground\",\n                                                                children: [\n                                                                    \"SGST (\",\n                                                                    (gstRate / 2).toFixed(2),\n                                                                    \"%)\"\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 453,\n                                                                columnNumber: 29\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"font-mono\",\n                                                                children: [\n                                                                    \"₹\",\n                                                                    sgstAmount.toFixed(2)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 454,\n                                                                columnNumber: 29\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 452,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex justify-between text-sm\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"text-muted-foreground\",\n                                                                children: [\n                                                                    \"CGST (\",\n                                                                    (gstRate / 2).toFixed(2),\n                                                                    \"%)\"\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 457,\n                                                                columnNumber: 29\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"font-mono\",\n                                                                children: [\n                                                                    \"₹\",\n                                                                    cgstAmount.toFixed(2)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 458,\n                                                                columnNumber: 29\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 456,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_separator__WEBPACK_IMPORTED_MODULE_6__.Separator, {\n                                                        className: \"my-1\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 460,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex justify-between items-center font-bold text-base\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                children: \"Total Amount\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 462,\n                                                                columnNumber: 29\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"font-mono\",\n                                                                children: [\n                                                                    \"₹\",\n                                                                    totalAmount.toFixed(2)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                                lineNumber: 463,\n                                                                columnNumber: 29\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                        lineNumber: 461,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                                lineNumber: 438,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                        lineNumber: 433,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                lineNumber: 343,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.CardFooter, {\n                                className: \"justify-end\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    onClick: handleSubmit,\n                                    disabled: saleItems.length === 0 || totalAmount <= 0,\n                                    children: \"Create Sale & Invoice\"\n                                }, void 0, false, {\n                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                    lineNumber: 469,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                lineNumber: 468,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                        lineNumber: 338,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                lineNumber: 328,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.Dialog, {\n                open: !!invoiceOrder,\n                onOpenChange: (isOpen)=>!isOpen && setInvoiceOrder(null),\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.DialogContent, {\n                    className: \"sm:max-w-4xl max-h-[90vh] flex flex-col\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.DialogHeader, {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.DialogTitle, {\n                                    children: \"Invoice Generated\"\n                                }, void 0, false, {\n                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                    lineNumber: 477,\n                                    columnNumber: 19\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.DialogDescription, {\n                                    children: \"The order is now ready for dispatch. You can print the invoice below.\"\n                                }, void 0, false, {\n                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                    lineNumber: 478,\n                                    columnNumber: 19\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                            lineNumber: 476,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            id: \"printable-area\",\n                            className: \"flex-grow overflow-y-auto bg-gray-100 print:bg-white p-4\",\n                            children: invoiceOrder && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_invoice__WEBPACK_IMPORTED_MODULE_12__.Invoice, {\n                                order: invoiceOrder,\n                                company: activeCompany\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                lineNumber: 481,\n                                columnNumber: 36\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                            lineNumber: 480,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.DialogFooter, {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.DialogClose, {\n                                    asChild: true,\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                        variant: \"outline\",\n                                        children: \"Close\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                        lineNumber: 484,\n                                        columnNumber: 40\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                    lineNumber: 484,\n                                    columnNumber: 19\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    onClick: handlePrint,\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CalendarIcon_Printer_ShieldAlert_ShoppingBag_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_22__[\"default\"], {\n                                            className: \"mr-2 h-4 w-4\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                            lineNumber: 485,\n                                            columnNumber: 49\n                                        }, this),\n                                        \" Print Invoice\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                                    lineNumber: 485,\n                                    columnNumber: 19\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                            lineNumber: 483,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                    lineNumber: 475,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/direct-sale/page.tsx\",\n                lineNumber: 474,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n_s(DirectSalePage, \"THpZJqyKvZTmGRRHiofE76gZtyo=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_14__.useRouter,\n        _hooks_use_toast__WEBPACK_IMPORTED_MODULE_11__.useToast,\n        _contexts_company_context__WEBPACK_IMPORTED_MODULE_16__.useCompany\n    ];\n});\n_c = DirectSalePage;\nvar _c;\n$RefreshReg$(_c, \"DirectSalePage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvZGlyZWN0LXNhbGUvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXFEO0FBQ25CO0FBUUo7QUFDa0I7QUFDRjtBQUNBO0FBQ1E7QUFDRjtBQVNwQjtBQUNrRDtBQUM5QjtBQUNQO0FBQ3VEO0FBRXJEO0FBQ2Q7QUFDVztBQVFiO0FBQ3lCO0FBYXpDLFNBQVMwQzs7SUFDdEIsTUFBTUMsU0FBU1QsMkRBQVNBO0lBQ3hCLE1BQU0sRUFBRVUsS0FBSyxFQUFFLEdBQUdsQiwyREFBUUE7SUFDMUIsTUFBTSxFQUFFbUIsYUFBYSxFQUFFLEdBQUdKLHNFQUFVQTtJQUNwQyxNQUFNLENBQUNLLFlBQVlDLGNBQWMsR0FBRy9DLCtDQUFRQSxDQUFXLEVBQUU7SUFDekQsTUFBTSxDQUFDZ0QsWUFBWUMsY0FBYyxHQUFHakQsK0NBQVFBLENBQWMsRUFBRTtJQUU1RCxNQUFNLENBQUNrRCxxQkFBcUJDLHVCQUF1QixHQUFHbkQsK0NBQVFBLENBQVcsRUFBRTtJQUMzRSxNQUFNLENBQUNvRCxpQkFBaUJDLG1CQUFtQixHQUFHckQsK0NBQVFBLENBQWMsRUFBRTtJQUV0RSxNQUFNLENBQUNzRCxjQUFjQyxnQkFBZ0IsR0FBR3ZELCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ3dELGlCQUFpQkMsbUJBQW1CLEdBQUd6RCwrQ0FBUUEsQ0FBQztJQUN2RCxNQUFNLENBQUMwRCxvQkFBb0JDLHNCQUFzQixHQUFHM0QsK0NBQVFBLENBQWdCO0lBRTVFLE1BQU0sQ0FBQzRELFdBQVdDLGFBQWEsR0FBRzdELCtDQUFRQSxDQUFhLEVBQUU7SUFDekQsTUFBTSxDQUFDOEQsU0FBU0MsV0FBVyxHQUFHL0QsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDZ0UsVUFBVUMsWUFBWSxHQUFHakUsK0NBQVFBLENBQW1CLElBQUlrRTtJQUMvRCxNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBR3BFLCtDQUFRQSxDQUFDO0lBRTNDLE1BQU0sQ0FBQ3FFLGNBQWNDLGdCQUFnQixHQUFHdEUsK0NBQVFBLENBQWU7SUFDL0QsTUFBTSxDQUFDdUUsaUJBQWlCQyxtQkFBbUIsR0FBR3hFLCtDQUFRQSxDQUFnQjtJQUV0RSxNQUFNLENBQUN5RSxXQUFXQyxhQUFhLEdBQUcxRSwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUMyRSxXQUFXQyxhQUFhLEdBQUc1RSwrQ0FBUUEsQ0FBQztJQUUzQ0MsZ0RBQVNBLENBQUM7UUFDUixNQUFNNEUsT0FBT0MsYUFBYUMsT0FBTyxDQUFDO1FBQ2xDLElBQUlGLFNBQVMsV0FBV0EsU0FBUyxhQUFhQSxTQUFTLGlCQUFpQjtZQUNwRUgsYUFBYTtRQUNqQjtRQUNBRSxhQUFhO0lBQ2YsR0FBRyxFQUFFO0lBRUwzRSxnREFBU0EsQ0FBQztRQUNSLElBQUksQ0FBQzRDLGVBQWU7WUFDbEJFLGNBQWMsRUFBRTtZQUNoQkUsY0FBYyxFQUFFO1lBQ2hCO1FBQ0Y7UUFFQSxNQUFNK0IsWUFBWW5DLGNBQWNvQyxFQUFFO1FBQ2xDLE1BQU1DLGNBQWNKLGFBQWFDLE9BQU8sQ0FBQyxXQUFxQixPQUFWQztRQUNwRCxNQUFNRyxVQUFvQkQsY0FBY0UsS0FBS0MsS0FBSyxDQUFDSCxlQUFlLEVBQUU7UUFDcEVuQyxjQUFjb0MsUUFBUUcsTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxLQUFLLEtBQUs7UUFFOUMsTUFBTUMsaUJBQWlCWCxhQUFhQyxPQUFPLENBQUMsZUFBeUIsT0FBVkM7UUFDM0QvQixjQUFjd0MsaUJBQWlCTCxLQUFLQyxLQUFLLENBQUNJLGtCQUFrQixFQUFFO1FBRTlEQztJQUVGLEdBQUc7UUFBQzdDO0tBQWM7SUFHbEIsTUFBTThDLG1CQUFtQixDQUFDQztRQUN4QixNQUFNQyxRQUFRRCxFQUFFRSxNQUFNLENBQUNELEtBQUs7UUFDNUJ0QyxnQkFBZ0JzQztRQUVoQixJQUFJQSxNQUFNRSxNQUFNLEdBQUcsR0FBRztZQUNwQixNQUFNQyxXQUFXbEQsV0FBV3dDLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRVUsSUFBSSxDQUFDQyxXQUFXLEdBQUdDLFFBQVEsQ0FBQ04sTUFBTUssV0FBVztZQUN2Ri9DLHVCQUF1QjZDO1FBQ3pCLE9BQU87WUFDTDdDLHVCQUF1QixFQUFFO1FBQzNCO0lBQ0Y7SUFFQSxNQUFNaUQsdUJBQXVCLENBQUNDO1FBQzVCOUMsZ0JBQWdCOEMsU0FBU0osSUFBSTtRQUM3QnhDLG1CQUFtQjRDLFNBQVNDLE9BQU8sSUFBSTtRQUN2QzNDLHNCQUFzQjBDLFNBQVNwQixFQUFFO1FBQ2pDOUIsdUJBQXVCLEVBQUU7SUFDM0I7SUFFQSxNQUFNdUMsY0FBYztRQUNsQjdCLGFBQWEwQyxDQUFBQSxVQUFXO21CQUFJQTtnQkFBUztvQkFBRUMsS0FBSyxRQUFtQixPQUFYdEMsS0FBS3VDLEdBQUc7b0JBQU1DLGFBQWE7b0JBQUlDLEtBQUs7b0JBQUlWLE1BQU07b0JBQUlXLEtBQUs7b0JBQUlDLFVBQVU7b0JBQUlDLE9BQU87b0JBQUlDLFdBQVc7Z0JBQUU7YUFBRTtJQUN6SjtJQUVBLE1BQU1DLGlCQUFpQixDQUFDUjtRQUN0QjNDLGFBQWEwQyxDQUFBQSxVQUFXQSxRQUFRakIsTUFBTSxDQUFDMkIsQ0FBQUEsT0FBUUEsS0FBS1QsR0FBRyxLQUFLQTtJQUM5RDtJQUVBLE1BQU1VLG1CQUFtQixDQUFDVixLQUFhVyxPQUF1QnRCO1FBQzVEaEMsYUFBYTBDLENBQUFBLFVBQVdBLFFBQVFhLEdBQUcsQ0FBQ0gsQ0FBQUE7Z0JBQ2hDLElBQUlBLEtBQUtULEdBQUcsS0FBS0EsS0FBSztvQkFDbEIsTUFBTWEsY0FBYzt3QkFBRSxHQUFHSixJQUFJO3dCQUFFLENBQUNFLE1BQU0sRUFBRXRCO29CQUFNO29CQUU5QyxJQUFJc0IsVUFBVSxRQUFRO3dCQUNwQkUsWUFBWVgsV0FBVyxHQUFHO3dCQUMxQixNQUFNWSxZQUFZQyxPQUFPMUIsT0FBT0ssV0FBVzt3QkFDM0MsSUFBR29CLFdBQVc7NEJBQ1pqRSxtQkFBbUJMLFdBQVdzQyxNQUFNLENBQUNrQyxDQUFBQSxJQUFLQSxFQUFFdkIsSUFBSSxDQUFDQyxXQUFXLEdBQUdDLFFBQVEsQ0FBQ21CLGNBQWNFLEVBQUVYLFFBQVEsR0FBRzt3QkFDckcsT0FBTzs0QkFDTHhELG1CQUFtQixFQUFFO3dCQUN2QjtvQkFDRjtvQkFFQSxJQUFJOEQsVUFBVSxlQUFlO3dCQUN6QixNQUFNTSxnQkFBZ0J6RSxXQUFXMEUsSUFBSSxDQUFDRixDQUFBQSxJQUFLQSxFQUFFdkMsRUFBRSxLQUFLWTt3QkFDcEQsSUFBSTRCLGVBQWU7NEJBQ2ZKLFlBQVlwQixJQUFJLEdBQUd3QixjQUFjeEIsSUFBSTs0QkFDckNvQixZQUFZVixHQUFHLEdBQUdjLGNBQWNkLEdBQUc7NEJBQ25DVSxZQUFZTixTQUFTLEdBQUdVLGNBQWNaLFFBQVE7d0JBQ2xEO29CQUNKO29CQUVBLElBQUlNLFVBQVUsY0FBYyxPQUFPdEIsVUFBVSxZQUFZd0IsWUFBWU4sU0FBUyxHQUFHLEtBQUtsQixRQUFRd0IsWUFBWU4sU0FBUyxFQUFFO3dCQUNqSG5FLE1BQU07NEJBQUUrRSxTQUFTOzRCQUFlQyxPQUFPOzRCQUF3QkMsYUFBYSxRQUEwQ1IsT0FBbENBLFlBQVlOLFNBQVMsRUFBQyxjQUE2QixPQUFqQk0sWUFBWXBCLElBQUksRUFBQzt3QkFBaUI7d0JBQ3hKLE9BQU87NEJBQUUsR0FBR29CLFdBQVc7NEJBQUVSLFVBQVVRLFlBQVlOLFNBQVM7d0JBQUM7b0JBQzdEO29CQUNBLE9BQU9NO2dCQUNYO2dCQUNBLE9BQU9KO1lBQ1g7SUFDRjtJQUVBLE1BQU0sRUFBRWEsUUFBUSxFQUFFQyxVQUFVLEVBQUVDLFVBQVUsRUFBRUMsY0FBYyxFQUFFQyxXQUFXLEVBQUUsR0FBR2hJLDhDQUFPQSxDQUFDO1FBQ2hGLE1BQU1pSSxNQUFNdkUsVUFBVXdFLE1BQU0sQ0FBQyxDQUFDQyxLQUFLcEI7WUFDL0IsTUFBTUosV0FBVyxPQUFPSSxLQUFLSixRQUFRLEtBQUssV0FBV0ksS0FBS0osUUFBUSxHQUFHO1lBQ3JFLE1BQU1DLFFBQVEsT0FBT0csS0FBS0gsS0FBSyxLQUFLLFdBQVdHLEtBQUtILEtBQUssR0FBRztZQUM1RCxPQUFPdUIsTUFBTXhCLFdBQVdDO1FBQzVCLEdBQUc7UUFDSCxNQUFNd0IsTUFBTUgsTUFBT3JFLENBQUFBLFVBQVUsR0FBRTtRQUMvQixNQUFNeUUsUUFBUUosTUFBTUc7UUFDcEIsT0FBTztZQUFFUixVQUFVSztZQUFLSixZQUFZTyxNQUFNO1lBQUdOLFlBQVlNLE1BQU07WUFBR0wsZ0JBQWdCSztZQUFLSixhQUFhSztRQUFNO0lBQzVHLEdBQUc7UUFBQzNFO1FBQVdFO0tBQVE7SUFHdkIsTUFBTTBFLGVBQWU7UUFDbkIsSUFBSSxDQUFDM0YsZUFBZTtZQUNoQkQsTUFBTTtnQkFBRStFLFNBQVM7Z0JBQWVDLE9BQU87Z0JBQXFCQyxhQUFhO1lBQWtEO1lBQzNIO1FBQ0o7UUFDQSxJQUFJLENBQUN2RSxnQkFBZ0IsQ0FBQ0UsaUJBQWlCO1lBQ25DWixNQUFNO2dCQUFFK0UsU0FBUztnQkFBZUMsT0FBTztnQkFBb0JDLGFBQWE7WUFBMEM7WUFDbEg7UUFDSjtRQUNBLE1BQU1ZLGlCQUFpQjdFLFVBQVUwQixNQUFNLENBQUMyQixDQUFBQSxPQUFRLENBQUNBLEtBQUtKLFFBQVEsSUFBSSxLQUFLLEtBQUssQ0FBQ0ksS0FBS0gsS0FBSyxJQUFJLE1BQU0sS0FBS0csS0FBS1AsV0FBVztRQUN0SCxJQUFJK0IsZUFBZTFDLE1BQU0sS0FBSyxHQUFHO1lBQzdCbkQsTUFBTTtnQkFBRStFLFNBQVM7Z0JBQWVDLE9BQU87Z0JBQWlCQyxhQUFhO1lBQWlEO1lBQ3RIO1FBQ0o7UUFDQSxJQUFJLENBQUM3RCxVQUFVO1lBQ1hwQixNQUFNO2dCQUFFK0UsU0FBUztnQkFBZUMsT0FBTztnQkFBZ0JDLGFBQWE7WUFBNEI7WUFDaEc7UUFDSjtRQUVBLElBQUk7WUFDQSxNQUFNM0MsY0FBY0osYUFBYUMsT0FBTyxDQUFDLFdBQTRCLE9BQWpCbEMsY0FBY29DLEVBQUU7WUFDcEUsSUFBSUUsVUFBb0JELGNBQWNFLEtBQUtDLEtBQUssQ0FBQ0gsZUFBZSxFQUFFO1lBQ2xFLElBQUltQixXQUFXbEIsUUFBUXVDLElBQUksQ0FBQ25DLENBQUFBLElBQUtBLEVBQUVVLElBQUksQ0FBQ0MsV0FBVyxPQUFPNUMsYUFBYTRDLFdBQVc7WUFDbEYsSUFBSXdDLGFBQWFoRjtZQUVqQixJQUFJLENBQUMyQyxVQUFVO2dCQUNYcUMsYUFBYSxRQUFtQixPQUFYeEUsS0FBS3VDLEdBQUc7Z0JBQzdCLE1BQU1rQyxZQUFvQjtvQkFBRTFELElBQUl5RDtvQkFBWXpDLE1BQU0zQztvQkFBY2tDLE9BQU87b0JBQWtCYyxTQUFTOUM7b0JBQWlCb0YsT0FBTztnQkFBRztnQkFDN0h6RCxRQUFRMEQsSUFBSSxDQUFDRjtZQUNqQixPQUFPO2dCQUNIRCxhQUFhckMsU0FBU3BCLEVBQUU7Z0JBQ3hCb0IsU0FBU0MsT0FBTyxHQUFHOUM7Z0JBQ25CMkIsVUFBVUEsUUFBUWlDLEdBQUcsQ0FBQzBCLENBQUFBLElBQUtBLEVBQUU3RCxFQUFFLEtBQUt5RCxhQUFhckMsV0FBWXlDO1lBQ2pFO1lBQ0FoRSxhQUFhaUUsT0FBTyxDQUFDLFdBQTRCLE9BQWpCbEcsY0FBY29DLEVBQUUsR0FBSUcsS0FBSzRELFNBQVMsQ0FBQzdEO1lBRW5FLE1BQU04RCxjQUFjakYsU0FBU2tGLFdBQVc7WUFDeEMsTUFBTUMsZ0JBQWdCLE9BQTRCLE9BQXJCLElBQUlqRixPQUFPa0YsT0FBTztZQUUvQyxNQUFNQyxZQUF3QlosZUFBZXJCLEdBQUcsQ0FBQ0gsQ0FBQUEsT0FBUztvQkFDdERoQyxJQUFJZ0MsS0FBS1AsV0FBVztvQkFDcEJtQixhQUFhLEdBQWlCWixPQUFkQSxLQUFLaEIsSUFBSSxFQUFDLE1BQWEsT0FBVGdCLEtBQUtOLEdBQUcsRUFBQztvQkFDdkNFLFVBQVV5QyxPQUFPckMsS0FBS0osUUFBUTtvQkFDOUJDLE9BQU93QyxPQUFPckMsS0FBS0gsS0FBSztvQkFDeEJGLEtBQUtLLEtBQUtMLEdBQUc7Z0JBQ2pCO1lBRUEsTUFBTTJDLGVBQWVGLFVBQVVqQyxHQUFHLENBQUNILENBQUFBLE9BQVEsR0FBcUJBLE9BQWxCQSxLQUFLSixRQUFRLEVBQUMsTUFBcUIsT0FBakJJLEtBQUtZLFdBQVcsR0FBSTJCLElBQUksQ0FBQztZQUV6RixNQUFNQyxnQkFBZ0IzRSxhQUFhQyxPQUFPLENBQUMsVUFBMkIsT0FBakJsQyxjQUFjb0MsRUFBRTtZQUNyRSxNQUFNeUUsWUFBcUJELGdCQUFnQnJFLEtBQUtDLEtBQUssQ0FBQ29FLGlCQUFpQixFQUFFO1lBQ3pFLE1BQU1FLFVBQVUsT0FBa0IsT0FBWHpGLEtBQUt1QyxHQUFHO1lBRS9CLE1BQU1tRCxlQUFzQjtnQkFDeEIzRSxJQUFJMEU7Z0JBQVN0RCxVQUFVL0M7Z0JBQWMyRCxNQUFNO2dCQUFxQjRDLFFBQVE7Z0JBQVVDLE1BQU07Z0JBQVVDLFNBQVNSO2dCQUFjUyxXQUFXbEYsYUFBYUMsT0FBTyxDQUFDLG1CQUFtQmtGO2dCQUFXQyxXQUFXakI7Z0JBQ2xNa0IsY0FBYztvQkFBRWxGLElBQUl5RDtvQkFBYXpDLE1BQU0zQztvQkFBY2dELFNBQVM5QztnQkFBaUI7Z0JBQy9FMkY7Z0JBQWVGO2dCQUFhSTtnQkFBV3ZCO2dCQUFVc0MsY0FBY3RHO2dCQUFTaUU7Z0JBQVlDO2dCQUFZQztnQkFBZ0JDO2dCQUNoSG1DLFVBQVUsRUFBRTtnQkFBRUMsWUFBWTtnQkFBR0MsWUFBWXJDO2dCQUFhc0MsZUFBZXRDLGNBQWMsSUFBSSxXQUFXO2dCQUFRdUMsZUFBZTtnQkFDekhDLEtBQUssWUFBaUMsT0FBckIsSUFBSXhHLE9BQU9rRixPQUFPO2dCQUNuQ3VCLFdBQVc7WUFDZjtZQUNBakIsVUFBVWIsSUFBSSxDQUFDZTtZQUNmOUUsYUFBYWlFLE9BQU8sQ0FBQyxVQUEyQixPQUFqQmxHLGNBQWNvQyxFQUFFLEdBQUlHLEtBQUs0RCxTQUFTLENBQUNVO1lBRWxFLE1BQU1rQixZQUFZLENBQUMvRCxVQUFrQmdFO2dCQUNqQyxJQUFJaEUsWUFBWSxHQUFHLE9BQU87Z0JBQzFCLElBQUlBLFdBQVcsS0FBS0EsWUFBWWdFLGNBQWMsT0FBTztnQkFDckQsT0FBTztZQUNYO1lBRUEsTUFBTUMsZUFBZWhHLGFBQWFDLE9BQU8sQ0FBQyxlQUFnQyxPQUFqQmxDLGNBQWNvQyxFQUFFO1lBQ3pFLElBQUk4RixXQUF3QkQsZUFBZTFGLEtBQUtDLEtBQUssQ0FBQ3lGLGdCQUFnQixFQUFFO1lBRXhFckMsZUFBZXVDLE9BQU8sQ0FBQy9ELENBQUFBO2dCQUNuQjhELFdBQVdBLFNBQVMzRCxHQUFHLENBQUM2RCxDQUFBQTtvQkFDcEIsSUFBSUEsR0FBR2hHLEVBQUUsS0FBS2dDLEtBQUtQLFdBQVcsRUFBRTt3QkFDNUIsTUFBTXdFLGNBQWNELEdBQUdwRSxRQUFRLEdBQUd5QyxPQUFPckMsS0FBS0osUUFBUTt3QkFDdEQsT0FBTzs0QkFBRSxHQUFHb0UsRUFBRTs0QkFBRXBFLFVBQVVxRTs0QkFBYXJCLFFBQVFlLFVBQVVNLGFBQWFELEdBQUdKLFlBQVk7d0JBQUU7b0JBQzNGO29CQUNBLE9BQU9JO2dCQUNYO1lBQ0o7WUFDQW5HLGFBQWFpRSxPQUFPLENBQUMsZUFBZ0MsT0FBakJsRyxjQUFjb0MsRUFBRSxHQUFJRyxLQUFLNEQsU0FBUyxDQUFDK0I7WUFDdkU5SCxjQUFjOEg7WUFFZCxNQUFNSSxvQkFBb0JyRyxhQUFhQyxPQUFPLENBQUMsa0JBQW1DLE9BQWpCbEMsY0FBY29DLEVBQUU7WUFDakYsTUFBTW1HLGdCQUErQkQsb0JBQW9CL0YsS0FBS0MsS0FBSyxDQUFDOEYscUJBQXFCLEVBQUU7WUFFM0YsTUFBTUUscUJBQWtDO2dCQUFFcEcsSUFBSSxNQUFpQixPQUFYZixLQUFLdUMsR0FBRyxJQUFHO2dCQUFLNkUsTUFBTXJDO2dCQUFhc0MsV0FBVzdDO2dCQUFhOEMsYUFBYWxJO2dCQUFjd0csTUFBTTtnQkFBU0MsU0FBUyxXQUF5QixPQUFkWjtnQkFBaUJzQyxPQUFPdkQ7Z0JBQWF3RCxRQUFRO2dCQUFHQyxPQUFPaEM7WUFBUTtZQUM1TyxNQUFNaUMsbUJBQWdDO2dCQUFFM0csSUFBSSxNQUFpQixPQUFYZixLQUFLdUMsR0FBRyxJQUFHO2dCQUFLNkUsTUFBTXJDO2dCQUFhc0MsV0FBVztnQkFBaUJDLGFBQWE7Z0JBQWlCMUIsTUFBTTtnQkFBU0MsU0FBUyxlQUFtQ3pHLE9BQXBCNkYsZUFBYyxRQUFtQixPQUFiN0Y7Z0JBQWdCbUksT0FBTztnQkFBR0MsUUFBUXhEO2dCQUFheUQsT0FBT2hDO1lBQVE7WUFDeFF5QixjQUFjdkMsSUFBSSxDQUFDd0Msb0JBQW9CTztZQUN2QzlHLGFBQWFpRSxPQUFPLENBQUMsa0JBQW1DLE9BQWpCbEcsY0FBY29DLEVBQUUsR0FBSUcsS0FBSzRELFNBQVMsQ0FBQ29DO1lBRTFFOUcsZ0JBQWdCc0Y7WUFDaEJoSCxNQUFNO2dCQUFFZ0YsT0FBTztnQkFBa0JDLGFBQWEsV0FBeUIsT0FBZHNCLGVBQWM7WUFBVztZQUVsRjVGLGdCQUFnQjtZQUNoQkUsbUJBQW1CO1lBQ25CRSxzQkFBc0I7WUFDdEJFLGFBQWE7Z0JBQUM7b0JBQUUyQyxLQUFLLFFBQW1CLE9BQVh0QyxLQUFLdUMsR0FBRztvQkFBTUMsYUFBYTtvQkFBSUMsS0FBSztvQkFBSVYsTUFBTTtvQkFBSVcsS0FBSztvQkFBSUMsVUFBVTtvQkFBSUMsT0FBTztvQkFBSUMsV0FBVztnQkFBRTthQUFFO1lBQ2hJOUMsWUFBWSxJQUFJQztZQUNoQkUsYUFBYTtRQUNqQixFQUFFLE9BQU15SCxPQUFZO1lBQ2hCakosTUFBTTtnQkFBRStFLFNBQVM7Z0JBQWVDLE9BQU87Z0JBQXlCQyxhQUFhZ0UsTUFBTUMsT0FBTztZQUFDO1FBQy9GO0lBQ0Y7SUFFQSxNQUFNQyxjQUFjLElBQU1DLE9BQU9DLEtBQUs7SUFDdEMsTUFBTUMsZ0JBQWdCaE0sOENBQU9BLENBQUMsSUFBTTBELFVBQVV3RSxNQUFNLENBQUMsQ0FBQ0MsS0FBS3BCLE9BQVNvQixNQUFNaUIsT0FBT3JDLEtBQUtKLFFBQVEsSUFBSSxJQUFJLElBQUk7UUFBQ2pEO0tBQVU7SUFFckgsSUFBSWUsV0FBVztRQUNiLHFCQUFPLDhEQUFDd0g7WUFBSUMsV0FBVTtzQkFBbUM7Ozs7OztJQUMzRDtJQUVBLElBQUksQ0FBQzNILFdBQVc7UUFDZCxxQkFDRSw4REFBQzBIO1lBQUlDLFdBQVU7c0JBQ2IsNEVBQUNoTSxxREFBSUE7Z0JBQUNnTSxXQUFVOztrQ0FDZCw4REFBQzlMLDJEQUFVQTtrQ0FDVCw0RUFBQ0MsMERBQVNBOzRCQUFDNkwsV0FBVTs7OENBQ25CLDhEQUFDckssZ0lBQVdBO29DQUFDcUssV0FBVTs7Ozs7O2dDQUFxQjs7Ozs7Ozs7Ozs7O2tDQUdoRCw4REFBQy9MLDREQUFXQTtrQ0FBQyw0RUFBQ2dNO3NDQUFFOzs7Ozs7Ozs7OztrQ0FDaEIsOERBQUM3TCwyREFBVUE7a0NBQUMsNEVBQUNFLHlEQUFNQTs0QkFBQzRMLFNBQVMsSUFBTTNKLE9BQU9rRyxJQUFJLENBQUM7c0NBQU07Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFJN0Q7SUFFQSxJQUFJLENBQUNoRyxlQUFlO1FBQ2xCLHFCQUNJLDhEQUFDc0o7WUFBSUMsV0FBVTtzQkFDYiw0RUFBQ2hNLHFEQUFJQTtnQkFBQ2dNLFdBQVU7O2tDQUNkLDhEQUFDOUwsMkRBQVVBO2tDQUNULDRFQUFDQywwREFBU0E7c0NBQUM7Ozs7Ozs7Ozs7O2tDQUViLDhEQUFDRiw0REFBV0E7a0NBQUMsNEVBQUNnTTtzQ0FBRTs7Ozs7Ozs7Ozs7a0NBQ2hCLDhEQUFDN0wsMkRBQVVBO2tDQUFDLDRFQUFDRSx5REFBTUE7NEJBQUM0TCxTQUFTLElBQU0zSixPQUFPa0csSUFBSSxDQUFDO3NDQUFzQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUkvRTtJQUVBLHFCQUNFOzswQkFDRSw4REFBQ3NEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNYLDhEQUFDekssZ0lBQVdBO2dDQUFDeUssV0FBVTs7Ozs7OzBDQUN2Qiw4REFBQ0c7Z0NBQUdILFdBQVU7MENBQW9DOzs7Ozs7Ozs7Ozs7a0NBRXRELDhEQUFDQzt3QkFBRUQsV0FBVTtrQ0FBd0I7Ozs7OztrQ0FHckMsOERBQUN2TCwrREFBU0E7Ozs7O2tDQUVWLDhEQUFDVCxxREFBSUE7d0JBQUNnTSxXQUFVOzswQ0FDWiw4REFBQzlMLDJEQUFVQTs7a0RBQ1AsOERBQUNDLDBEQUFTQTtrREFBQzs7Ozs7O2tEQUNYLDhEQUFDRSxnRUFBZUE7a0RBQUM7Ozs7Ozs7Ozs7OzswQ0FFckIsOERBQUNKLDREQUFXQTtnQ0FBQytMLFdBQVU7O2tEQUNuQiw4REFBQ0Q7d0NBQUlDLFdBQVU7OzBEQUNYLDhEQUFDRDtnREFBSUMsV0FBVTs7a0VBQ1gsOERBQUN4TCx1REFBS0E7d0RBQUM0TCxTQUFRO2tFQUFPOzs7Ozs7a0VBQ3RCLDhEQUFDTDt3REFBSUMsV0FBVTs7MEVBQ1gsOERBQUN6TCx1REFBS0E7Z0VBQUNzRSxJQUFHO2dFQUFPZ0IsTUFBSztnRUFBT3dHLFFBQVE7Z0VBQUM1RyxPQUFPdkM7Z0VBQWNvSixVQUFVL0c7Z0VBQWtCZ0gsUUFBUSxJQUFNQyxXQUFXLElBQU16Six1QkFBdUIsRUFBRSxHQUFHO2dFQUFNMEosY0FBYTs7Ozs7OzREQUNwSzNKLG9CQUFvQjZDLE1BQU0sR0FBRyxtQkFDMUIsOERBQUNvRztnRUFBSUMsV0FBVTswRUFDWCw0RUFBQ0Q7b0VBQUlDLFdBQVU7OEVBQ1ZsSixvQkFBb0JrRSxHQUFHLENBQUM3QixDQUFBQSxrQkFBTyw4REFBQ3VIOzRFQUFrQmhELE1BQUs7NEVBQVNzQyxXQUFVOzRFQUFpREUsU0FBUyxJQUFNbEcscUJBQXFCYjtzRkFBS0EsRUFBRVUsSUFBSTsyRUFBOUhWLEVBQUVOLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswREFNcEUsOERBQUNrSDtnREFBSUMsV0FBVTs7a0VBQ1osOERBQUN4TCx1REFBS0E7d0RBQUM0TCxTQUFRO2tFQUFXOzs7Ozs7a0VBQzFCLDhEQUFDbEwsMkRBQU9BOzswRUFDSiw4REFBQ0Usa0VBQWNBO2dFQUFDdUwsT0FBTzswRUFDbkIsNEVBQUNyTSx5REFBTUE7b0VBQUNpSCxTQUFTO29FQUFXeUUsV0FBV25LLCtDQUFFQSxDQUFDLDhDQUE4QyxDQUFDK0IsWUFBWTs7c0ZBQ2pHLDhEQUFDbkMsZ0lBQVlBOzRFQUFDdUssV0FBVTs7Ozs7O3dFQUN2QnBJLFdBQVc3RCwrRUFBTUEsQ0FBQzZELFVBQVUsdUJBQVMsOERBQUNnSjtzRkFBSzs7Ozs7Ozs7Ozs7Ozs7Ozs7MEVBR3BELDhEQUFDekwsa0VBQWNBO2dFQUFDNkssV0FBVTswRUFBYSw0RUFBQzNLLDhEQUFRQTtvRUFBQ3dMLE1BQUs7b0VBQVNDLFVBQVVsSjtvRUFBVW1KLFVBQVVsSjtvRUFBYW1KLFlBQVk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tEQUtsSSw4REFBQ2pCO3dDQUFJQyxXQUFVOzswREFDWCw4REFBQ3hMLHVEQUFLQTtnREFBQzRMLFNBQVE7MERBQVU7Ozs7OzswREFDekIsOERBQUMxTCw2REFBUUE7Z0RBQUNtRSxJQUFHO2dEQUFVZ0IsTUFBSztnREFBVXdHLFFBQVE7Z0RBQUM1RyxPQUFPckM7Z0RBQWlCa0osVUFBVTlHLENBQUFBLElBQUtuQyxtQkFBbUJtQyxFQUFFRSxNQUFNLENBQUNELEtBQUs7Z0RBQUd3SCxNQUFNOzs7Ozs7Ozs7Ozs7a0RBR3BJLDhEQUFDbEI7d0NBQUlDLFdBQVU7OzBEQUNYLDhEQUFDeEwsdURBQUtBOzBEQUFDOzs7Ozs7MERBQ1AsOERBQUN1TDtnREFBSUMsV0FBVTswREFDWCw0RUFBQ2pLLHdEQUFLQTs7c0VBQ0YsOERBQUNJLDhEQUFXQTtzRUFDUiw0RUFBQ0MsMkRBQVFBOztrRkFDTCw4REFBQ0YsNERBQVNBO3dFQUFDOEosV0FBVTtrRkFBVTs7Ozs7O2tGQUMvQiw4REFBQzlKLDREQUFTQTtrRkFBQzs7Ozs7O2tGQUNYLDhEQUFDQSw0REFBU0E7a0ZBQUM7Ozs7OztrRkFDWCw4REFBQ0EsNERBQVNBO2tGQUFDOzs7Ozs7a0ZBQ1gsOERBQUNBLDREQUFTQTt3RUFBQzhKLFdBQVU7a0ZBQWE7Ozs7OztrRkFDbEMsOERBQUM5Siw0REFBU0E7d0VBQUM4SixXQUFVOzs7Ozs7Ozs7Ozs7Ozs7OztzRUFHN0IsOERBQUNoSyw0REFBU0E7c0VBQ0x3QixVQUFVd0QsR0FBRyxDQUFDLENBQUNILE1BQU1xRyxzQkFDbEIsOERBQUM5SywyREFBUUE7O3NGQUNMLDhEQUFDSCw0REFBU0E7c0ZBQ04sNEVBQUM4SjtnRkFBSUMsV0FBVTs7a0dBQ1gsOERBQUN6TCx1REFBS0E7d0ZBQ0Y0TSxhQUFZO3dGQUNaMUgsT0FBT29CLEtBQUtoQixJQUFJO3dGQUNoQnlHLFVBQVUsQ0FBQzlHLElBQU1zQixpQkFBaUJELEtBQUtULEdBQUcsRUFBRSxRQUFRWixFQUFFRSxNQUFNLENBQUNELEtBQUs7d0ZBQ2xFMkgsU0FBUyxJQUFNaEosbUJBQW1CeUMsS0FBS1QsR0FBRzt3RkFDMUNtRyxRQUFRLElBQU1DLFdBQVc7Z0dBQVFwSSxtQkFBbUI7Z0dBQU9uQixtQkFBbUIsRUFBRTs0RkFBRyxHQUFHO3dGQUN0RndKLGNBQWE7d0ZBQ2JKLFFBQVE7Ozs7OztvRkFFWGxJLG9CQUFvQjBDLEtBQUtULEdBQUcsSUFBSXBELGdCQUFnQjJDLE1BQU0sR0FBRyxtQkFDdEQsOERBQUNvRzt3RkFBSUMsV0FBVTtrR0FDWCw0RUFBQ0Q7NEZBQUlDLFdBQVU7c0dBQ1ZoSixnQkFBZ0JnRSxHQUFHLENBQUNJLENBQUFBLGtCQUNqQiw4REFBQzJFO29HQUFlQyxXQUFVO29HQUErQ3FCLGFBQWE7d0dBQU92RyxpQkFBaUJELEtBQUtULEdBQUcsRUFBRSxlQUFlZ0IsRUFBRXZDLEVBQUU7d0dBQUc1QixtQkFBbUIsRUFBRTtvR0FBRTs7d0dBQ2hLbUUsRUFBRXZCLElBQUk7d0dBQUM7d0dBQWN1QixFQUFFWCxRQUFRO3dHQUFDOzttR0FEM0JXLEVBQUV2QyxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzRkFTdEMsOERBQUM1Qyw0REFBU0E7c0ZBQUMsNEVBQUMxQix1REFBS0E7Z0ZBQUM0TSxhQUFZO2dGQUFNMUgsT0FBT29CLEtBQUtMLEdBQUc7Z0ZBQUU4RixVQUFVOUcsQ0FBQUEsSUFBS3NCLGlCQUFpQkQsS0FBS1QsR0FBRyxFQUFFLE9BQU9aLEVBQUVFLE1BQU0sQ0FBQ0QsS0FBSzs7Ozs7Ozs7Ozs7c0ZBQ3BILDhEQUFDeEQsNERBQVNBO3NGQUFDLDRFQUFDMUIsdURBQUtBO2dGQUFDbUosTUFBSztnRkFBU2pFLE9BQU9vQixLQUFLSixRQUFRO2dGQUFFNkYsVUFBVTlHLENBQUFBLElBQUtzQixpQkFBaUJELEtBQUtULEdBQUcsRUFBRSxZQUFZa0gsV0FBVzlILEVBQUVFLE1BQU0sQ0FBQ0QsS0FBSyxLQUFLO2dGQUFLOEgsS0FBSTtnRkFBSUMsS0FBSzNHLEtBQUtGLFNBQVMsSUFBSWtEO2dGQUFXbUMsV0FBVTtnRkFBYW1CLGFBQVk7Ozs7Ozs7Ozs7O3NGQUM1Tiw4REFBQ2xMLDREQUFTQTtzRkFBQyw0RUFBQzFCLHVEQUFLQTtnRkFBQ21KLE1BQUs7Z0ZBQVNqRSxPQUFPb0IsS0FBS0gsS0FBSztnRkFBRTRGLFVBQVU5RyxDQUFBQSxJQUFLc0IsaUJBQWlCRCxLQUFLVCxHQUFHLEVBQUUsU0FBU2tILFdBQVc5SCxFQUFFRSxNQUFNLENBQUNELEtBQUssS0FBSztnRkFBSzhILEtBQUk7Z0ZBQUl2QixXQUFVO2dGQUFhbUIsYUFBWTs7Ozs7Ozs7Ozs7c0ZBQ3BMLDhEQUFDbEwsNERBQVNBOzRFQUFDK0osV0FBVTs7Z0ZBQXVCO2dGQUFHLEVBQUM5QyxPQUFPckMsS0FBS0osUUFBUSxLQUFLLEtBQU15QyxDQUFBQSxPQUFPckMsS0FBS0gsS0FBSyxLQUFLLEVBQUMsRUFBRytHLE9BQU8sQ0FBQzs7Ozs7OztzRkFDakgsOERBQUN4TCw0REFBU0E7c0ZBQUMsNEVBQUMzQix5REFBTUE7Z0ZBQUNpSCxTQUFRO2dGQUFRbUcsTUFBSztnRkFBT3hCLFNBQVMsSUFBTXRGLGVBQWVDLEtBQUtULEdBQUc7Z0ZBQUc0RixXQUFVOzBGQUFtQiw0RUFBQ3RLLGdJQUFNQTtvRkFBQ3NLLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7O21FQTdCNUhuRixLQUFLVCxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MERBbUN0Qyw4REFBQzlGLHlEQUFNQTtnREFBQ2lILFNBQVE7Z0RBQVVtRyxNQUFLO2dEQUFLeEIsU0FBUzVHO2dEQUFhMEcsV0FBVTswREFBTzs7Ozs7Ozs7Ozs7O2tEQUdoRiw4REFBQ3ZMLCtEQUFTQTs7Ozs7a0RBRVYsOERBQUNzTDt3Q0FBSUMsV0FBVTs7MERBQ1gsOERBQUNEO2dEQUFJQyxXQUFVOztrRUFDWCw4REFBQ3hMLHVEQUFLQTt3REFBQzRMLFNBQVE7a0VBQVk7Ozs7OztrRUFDM0IsOERBQUMxTCw2REFBUUE7d0RBQUNtRSxJQUFHO3dEQUFZWSxPQUFPMUI7d0RBQVd1SSxVQUFVOUcsQ0FBQUEsSUFBS3hCLGFBQWF3QixFQUFFRSxNQUFNLENBQUNELEtBQUs7d0RBQUd3SCxNQUFNO3dEQUFHakIsV0FBVTs7Ozs7Ozs7Ozs7OzBEQUUvRyw4REFBQ0Q7Z0RBQUlDLFdBQVU7O2tFQUNYLDhEQUFDN0wsMERBQVNBO3dEQUFDNkwsV0FBVTtrRUFBVTs7Ozs7O2tFQUMvQiw4REFBQ0Q7d0RBQUlDLFdBQVU7OzBFQUNYLDhEQUFDWTtnRUFBS1osV0FBVTswRUFBd0I7Ozs7OzswRUFDeEMsOERBQUNZO2dFQUFLWixXQUFVOzBFQUFhRixjQUFjMkIsT0FBTyxDQUFDOzs7Ozs7Ozs7Ozs7a0VBRXZELDhEQUFDMUI7d0RBQUlDLFdBQVU7OzBFQUNYLDhEQUFDWTtnRUFBS1osV0FBVTswRUFBd0I7Ozs7OzswRUFDeEMsOERBQUNZO2dFQUFLWixXQUFVOztvRUFBWTtvRUFBRXRFLFNBQVMrRixPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7a0VBRW5ELDhEQUFDMUI7d0RBQUlDLFdBQVU7OzBFQUNYLDhEQUFDeEwsdURBQUtBO2dFQUFDNEwsU0FBUTtnRUFBVUosV0FBVTswRUFBMEM7Ozs7OzswRUFDN0UsOERBQUN6TCx1REFBS0E7Z0VBQUNzRSxJQUFHO2dFQUFVNkUsTUFBSztnRUFBU2pFLE9BQU8vQjtnRUFBUzRJLFVBQVU5RyxDQUFBQSxJQUFLN0IsV0FBVzJKLFdBQVc5SCxFQUFFRSxNQUFNLENBQUNELEtBQUssS0FBSztnRUFBSXVHLFdBQVU7Ozs7Ozs7Ozs7OztrRUFFNUgsOERBQUNEO3dEQUFJQyxXQUFVOzswRUFDWCw4REFBQ1k7Z0VBQUtaLFdBQVU7O29FQUF3QjtvRUFBUXRJLENBQUFBLFVBQVUsR0FBRytKLE9BQU8sQ0FBQztvRUFBRzs7Ozs7OzswRUFDeEUsOERBQUNiO2dFQUFLWixXQUFVOztvRUFBWTtvRUFBRXJFLFdBQVc4RixPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7a0VBRXJELDhEQUFDMUI7d0RBQUlDLFdBQVU7OzBFQUNYLDhEQUFDWTtnRUFBS1osV0FBVTs7b0VBQXdCO29FQUFRdEksQ0FBQUEsVUFBVSxHQUFHK0osT0FBTyxDQUFDO29FQUFHOzs7Ozs7OzBFQUN4RSw4REFBQ2I7Z0VBQUtaLFdBQVU7O29FQUFZO29FQUFFcEUsV0FBVzZGLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7OztrRUFFckQsOERBQUNoTiwrREFBU0E7d0RBQUN1TCxXQUFVOzs7Ozs7a0VBQ3JCLDhEQUFDRDt3REFBSUMsV0FBVTs7MEVBQ1gsOERBQUNZOzBFQUFLOzs7Ozs7MEVBQ04sOERBQUNBO2dFQUFLWixXQUFVOztvRUFBWTtvRUFBRWxFLFlBQVkyRixPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MENBS2xFLDhEQUFDck4sMkRBQVVBO2dDQUFDNEwsV0FBVTswQ0FDbEIsNEVBQUMxTCx5REFBTUE7b0NBQUM0TCxTQUFTOUQ7b0NBQWN1RixVQUFVbkssVUFBVW1DLE1BQU0sS0FBSyxLQUFLbUMsZUFBZTs4Q0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBSy9GLDhEQUFDbkgseURBQU1BO2dCQUFDaU4sTUFBTSxDQUFDLENBQUMzSjtnQkFBYzRKLGNBQWMsQ0FBQ0MsU0FBVyxDQUFDQSxVQUFVNUosZ0JBQWdCOzBCQUMvRSw0RUFBQ3RELGdFQUFhQTtvQkFBQ29MLFdBQVU7O3NDQUNyQiw4REFBQ25MLCtEQUFZQTs7OENBQ1QsOERBQUNDLDhEQUFXQTs4Q0FBQzs7Ozs7OzhDQUNiLDhEQUFDQyxvRUFBaUJBOzhDQUFDOzs7Ozs7Ozs7Ozs7c0NBRXZCLDhEQUFDZ0w7NEJBQUlsSCxJQUFHOzRCQUFpQm1ILFdBQVU7c0NBQzlCL0gsOEJBQWdCLDhEQUFDckMseURBQU9BO2dDQUFDbU0sT0FBTzlKO2dDQUFjK0osU0FBU3ZMOzs7Ozs7Ozs7OztzQ0FFNUQsOERBQUN6QiwrREFBWUE7OzhDQUNULDhEQUFDQyw4REFBV0E7b0NBQUMwTCxPQUFPOzhDQUFDLDRFQUFDck0seURBQU1BO3dDQUFDaUgsU0FBUTtrREFBVTs7Ozs7Ozs7Ozs7OENBQy9DLDhEQUFDakgseURBQU1BO29DQUFDNEwsU0FBU1A7O3NEQUFhLDhEQUFDbkssZ0lBQU9BOzRDQUFDd0ssV0FBVTs7Ozs7O3dDQUFpQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNcEY7R0FuYndCMUo7O1FBQ1BSLHVEQUFTQTtRQUNOUix1REFBUUE7UUFDQWUsa0VBQVVBOzs7S0FIZEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwcC9kaXJlY3Qtc2FsZS9wYWdlLnRzeD9lNTkwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcbmltcG9ydCB7XG4gIENhcmQsXG4gIENhcmRDb250ZW50LFxuICBDYXJkSGVhZGVyLFxuICBDYXJkVGl0bGUsXG4gIENhcmRGb290ZXIsXG4gIENhcmREZXNjcmlwdGlvblxufSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NhcmRcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcbmltcG9ydCB7IExhYmVsIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9sYWJlbFwiO1xuaW1wb3J0IHsgU2VwYXJhdG9yIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9zZXBhcmF0b3JcIjtcbmltcG9ydCB7IFRleHRhcmVhIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS90ZXh0YXJlYVwiO1xuaW1wb3J0IHtcbiAgRGlhbG9nLFxuICBEaWFsb2dDb250ZW50LFxuICBEaWFsb2dIZWFkZXIsXG4gIERpYWxvZ1RpdGxlLFxuICBEaWFsb2dEZXNjcmlwdGlvbixcbiAgRGlhbG9nRm9vdGVyLFxuICBEaWFsb2dDbG9zZSxcbn0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9kaWFsb2dcIjtcbmltcG9ydCB7IFBvcG92ZXIsIFBvcG92ZXJDb250ZW50LCBQb3BvdmVyVHJpZ2dlciB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvcG9wb3ZlclwiO1xuaW1wb3J0IHsgQ2FsZW5kYXIgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NhbGVuZGFyXCI7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gXCJAL2hvb2tzL3VzZS10b2FzdFwiO1xuaW1wb3J0IHsgU2hvcHBpbmdCYWcsIEluZGlhblJ1cGVlLCBQcmludGVyLCBDYWxlbmRhckljb24sIFRyYXNoMiwgU2hpZWxkQWxlcnQgfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5pbXBvcnQgdHlwZSB7IExlZGdlciwgU3RvY2tJdGVtLCBPcmRlciwgTGVkZ2VyRW50cnksIExpbmVJdGVtLCBQYXltZW50U3RhdHVzLCBTdG9ja1N0YXR1cywgQ29tcGFueSB9IGZyb20gXCJAL2xpYi90eXBlc1wiO1xuaW1wb3J0IHsgSW52b2ljZSB9IGZyb20gXCJAL2NvbXBvbmVudHMvaW52b2ljZVwiO1xuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L25hdmlnYXRpb25cIjtcbmltcG9ydCB7XG4gIFRhYmxlLFxuICBUYWJsZUJvZHksXG4gIFRhYmxlQ2VsbCxcbiAgVGFibGVIZWFkLFxuICBUYWJsZUhlYWRlcixcbiAgVGFibGVSb3csXG59IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvdGFibGVcIjtcbmltcG9ydCB7IHVzZUNvbXBhbnkgfSBmcm9tIFwiQC9jb250ZXh0cy9jb21wYW55LWNvbnRleHRcIjtcblxudHlwZSBTYWxlSXRlbSA9IHtcbiAga2V5OiBzdHJpbmc7XG4gIHN0b2NrSXRlbUlkOiBzdHJpbmc7XG4gIHNrdTogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGhzbjogc3RyaW5nO1xuICBxdWFudGl0eTogbnVtYmVyIHwgXCJcIjtcbiAgcHJpY2U6IG51bWJlciB8IFwiXCI7XG4gIGF2YWlsYWJsZTogbnVtYmVyO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGlyZWN0U2FsZVBhZ2UoKSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCB7IGFjdGl2ZUNvbXBhbnkgfSA9IHVzZUNvbXBhbnkoKTtcbiAgY29uc3QgW2FsbERlYnRvcnMsIHNldEFsbERlYnRvcnNdID0gdXNlU3RhdGU8TGVkZ2VyW10+KFtdKTtcbiAgY29uc3QgW3N0b2NrSXRlbXMsIHNldFN0b2NrSXRlbXNdID0gdXNlU3RhdGU8U3RvY2tJdGVtW10+KFtdKTtcbiAgXG4gIGNvbnN0IFtjdXN0b21lclN1Z2dlc3Rpb25zLCBzZXRDdXN0b21lclN1Z2dlc3Rpb25zXSA9IHVzZVN0YXRlPExlZGdlcltdPihbXSk7XG4gIGNvbnN0IFtpdGVtU3VnZ2VzdGlvbnMsIHNldEl0ZW1TdWdnZXN0aW9uc10gPSB1c2VTdGF0ZTxTdG9ja0l0ZW1bXT4oW10pO1xuICBcbiAgY29uc3QgW2N1c3RvbWVyTmFtZSwgc2V0Q3VzdG9tZXJOYW1lXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbc2hpcHBpbmdBZGRyZXNzLCBzZXRTaGlwcGluZ0FkZHJlc3NdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzZWxlY3RlZEN1c3RvbWVySWQsIHNldFNlbGVjdGVkQ3VzdG9tZXJJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBbc2FsZUl0ZW1zLCBzZXRTYWxlSXRlbXNdID0gdXNlU3RhdGU8U2FsZUl0ZW1bXT4oW10pO1xuICBjb25zdCBbZ3N0UmF0ZSwgc2V0R3N0UmF0ZV0gPSB1c2VTdGF0ZSgxOCk7XG4gIGNvbnN0IFtzYWxlRGF0ZSwgc2V0U2FsZURhdGVdID0gdXNlU3RhdGU8RGF0ZSB8IHVuZGVmaW5lZD4obmV3IERhdGUoKSk7XG4gIGNvbnN0IFtuYXJyYXRpb24sIHNldE5hcnJhdGlvbl0gPSB1c2VTdGF0ZShcIlwiKTtcblxuICBjb25zdCBbaW52b2ljZU9yZGVyLCBzZXRJbnZvaWNlT3JkZXJdID0gdXNlU3RhdGU8T3JkZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2FjdGl2ZUl0ZW1JbnB1dCwgc2V0QWN0aXZlSXRlbUlucHV0XSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IFtoYXNBY2Nlc3MsIHNldEhhc0FjY2Vzc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHJvbGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJSb2xlXCIpO1xuICAgIGlmIChyb2xlID09PSBcIm93bmVyXCIgfHwgcm9sZSA9PT0gXCJmYWN0b3J5XCIgfHwgcm9sZSA9PT0gXCJhZG1pbmlzdHJhdG9yXCIpIHtcbiAgICAgICAgc2V0SGFzQWNjZXNzKHRydWUpO1xuICAgIH1cbiAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUNvbXBhbnkpIHtcbiAgICAgIHNldEFsbERlYnRvcnMoW10pO1xuICAgICAgc2V0U3RvY2tJdGVtcyhbXSk7XG4gICAgICByZXR1cm47XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBjb21wYW55SWQgPSBhY3RpdmVDb21wYW55LmlkO1xuICAgIGNvbnN0IGxlZGdlcnNKc29uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYGxlZGdlcnNfJHtjb21wYW55SWR9YCk7XG4gICAgY29uc3QgbGVkZ2VyczogTGVkZ2VyW10gPSBsZWRnZXJzSnNvbiA/IEpTT04ucGFyc2UobGVkZ2Vyc0pzb24pIDogW107XG4gICAgc2V0QWxsRGVidG9ycyhsZWRnZXJzLmZpbHRlcihjID0+IGMuZ3JvdXAgPT09ICdTdW5kcnkgRGVidG9ycycpKTtcbiAgICBcbiAgICBjb25zdCBzdG9ja0l0ZW1zSnNvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBzdG9ja19pdGVtc18ke2NvbXBhbnlJZH1gKTtcbiAgICBzZXRTdG9ja0l0ZW1zKHN0b2NrSXRlbXNKc29uID8gSlNPTi5wYXJzZShzdG9ja0l0ZW1zSnNvbikgOiBbXSk7XG5cbiAgICBhZGRTYWxlSXRlbSgpO1xuXG4gIH0sIFthY3RpdmVDb21wYW55XSk7XG5cblxuICBjb25zdCBoYW5kbGVOYW1lQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICBzZXRDdXN0b21lck5hbWUodmFsdWUpO1xuXG4gICAgaWYgKHZhbHVlLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gYWxsRGVidG9ycy5maWx0ZXIoYyA9PiBjLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh2YWx1ZS50b0xvd2VyQ2FzZSgpKSk7XG4gICAgICBzZXRDdXN0b21lclN1Z2dlc3Rpb25zKGZpbHRlcmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0Q3VzdG9tZXJTdWdnZXN0aW9ucyhbXSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNlbGVjdEN1c3RvbWVyID0gKGN1c3RvbWVyOiBMZWRnZXIpID0+IHtcbiAgICBzZXRDdXN0b21lck5hbWUoY3VzdG9tZXIubmFtZSk7XG4gICAgc2V0U2hpcHBpbmdBZGRyZXNzKGN1c3RvbWVyLmFkZHJlc3MgfHwgXCJcIik7XG4gICAgc2V0U2VsZWN0ZWRDdXN0b21lcklkKGN1c3RvbWVyLmlkKTtcbiAgICBzZXRDdXN0b21lclN1Z2dlc3Rpb25zKFtdKTtcbiAgfTtcblxuICBjb25zdCBhZGRTYWxlSXRlbSA9ICgpID0+IHtcbiAgICBzZXRTYWxlSXRlbXMoY3VycmVudCA9PiBbLi4uY3VycmVudCwgeyBrZXk6IGBpdGVtLSR7RGF0ZS5ub3coKX1gLCBzdG9ja0l0ZW1JZDogJycsIHNrdTogJycsIG5hbWU6ICcnLCBoc246ICcnLCBxdWFudGl0eTogJycsIHByaWNlOiAnJywgYXZhaWxhYmxlOiAwIH1dKTtcbiAgfTtcbiAgXG4gIGNvbnN0IHJlbW92ZVNhbGVJdGVtID0gKGtleTogc3RyaW5nKSA9PiB7XG4gICAgc2V0U2FsZUl0ZW1zKGN1cnJlbnQgPT4gY3VycmVudC5maWx0ZXIoaXRlbSA9PiBpdGVtLmtleSAhPT0ga2V5KSk7XG4gIH07XG4gIFxuICBjb25zdCBoYW5kbGVJdGVtQ2hhbmdlID0gKGtleTogc3RyaW5nLCBmaWVsZDoga2V5b2YgU2FsZUl0ZW0sIHZhbHVlOiBhbnkpID0+IHtcbiAgICBzZXRTYWxlSXRlbXMoY3VycmVudCA9PiBjdXJyZW50Lm1hcChpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0ua2V5ID09PSBrZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtID0geyAuLi5pdGVtLCBbZmllbGRdOiB2YWx1ZSB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZmllbGQgPT09ICduYW1lJykge1xuICAgICAgICAgICAgICB1cGRhdGVkSXRlbS5zdG9ja0l0ZW1JZCA9ICcnO1xuICAgICAgICAgICAgICBjb25zdCBzZWFyY2hWYWwgPSBTdHJpbmcodmFsdWUpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgIGlmKHNlYXJjaFZhbCkge1xuICAgICAgICAgICAgICAgIHNldEl0ZW1TdWdnZXN0aW9ucyhzdG9ja0l0ZW1zLmZpbHRlcihzID0+IHMubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFZhbCkgJiYgcy5xdWFudGl0eSA+IDApKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRJdGVtU3VnZ2VzdGlvbnMoW10pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmaWVsZCA9PT0gJ3N0b2NrSXRlbUlkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkU3RvY2sgPSBzdG9ja0l0ZW1zLmZpbmQocyA9PiBzLmlkID09PSB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkU3RvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEl0ZW0ubmFtZSA9IHNlbGVjdGVkU3RvY2submFtZTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEl0ZW0uc2t1ID0gc2VsZWN0ZWRTdG9jay5za3U7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRJdGVtLmF2YWlsYWJsZSA9IHNlbGVjdGVkU3RvY2sucXVhbnRpdHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmllbGQgPT09ICdxdWFudGl0eScgJiYgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiB1cGRhdGVkSXRlbS5hdmFpbGFibGUgPiAwICYmIHZhbHVlID4gdXBkYXRlZEl0ZW0uYXZhaWxhYmxlKSB7XG4gICAgICAgICAgICAgICAgdG9hc3QoeyB2YXJpYW50OiBcImRlc3RydWN0aXZlXCIsIHRpdGxlOiBcIlN0b2NrIExpbWl0IEV4Y2VlZGVkXCIsIGRlc2NyaXB0aW9uOiBgT25seSAke3VwZGF0ZWRJdGVtLmF2YWlsYWJsZX0gdW5pdHMgb2YgJHt1cGRhdGVkSXRlbS5uYW1lfSBhcmUgYXZhaWxhYmxlLmAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4udXBkYXRlZEl0ZW0sIHF1YW50aXR5OiB1cGRhdGVkSXRlbS5hdmFpbGFibGUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkSXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgeyBzdWJUb3RhbCwgc2dzdEFtb3VudCwgY2dzdEFtb3VudCwgdG90YWxHc3RBbW91bnQsIHRvdGFsQW1vdW50IH0gPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBzdWIgPSBzYWxlSXRlbXMucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgcXVhbnRpdHkgPSB0eXBlb2YgaXRlbS5xdWFudGl0eSA9PT0gJ251bWJlcicgPyBpdGVtLnF1YW50aXR5IDogMDtcbiAgICAgICAgY29uc3QgcHJpY2UgPSB0eXBlb2YgaXRlbS5wcmljZSA9PT0gJ251bWJlcicgPyBpdGVtLnByaWNlIDogMDtcbiAgICAgICAgcmV0dXJuIGFjYyArIHF1YW50aXR5ICogcHJpY2U7XG4gICAgfSwgMCk7XG4gICAgY29uc3QgZ3N0ID0gc3ViICogKGdzdFJhdGUgLyAxMDApO1xuICAgIGNvbnN0IHRvdGFsID0gc3ViICsgZ3N0O1xuICAgIHJldHVybiB7IHN1YlRvdGFsOiBzdWIsIHNnc3RBbW91bnQ6IGdzdCAvIDIsIGNnc3RBbW91bnQ6IGdzdCAvIDIsIHRvdGFsR3N0QW1vdW50OiBnc3QsIHRvdGFsQW1vdW50OiB0b3RhbCB9O1xuICB9LCBbc2FsZUl0ZW1zLCBnc3RSYXRlXSk7XG5cblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVDb21wYW55KSB7XG4gICAgICAgIHRvYXN0KHsgdmFyaWFudDogXCJkZXN0cnVjdGl2ZVwiLCB0aXRsZTogXCJObyBBY3RpdmUgQ29tcGFueVwiLCBkZXNjcmlwdGlvbjogXCJQbGVhc2Ugc2VsZWN0IGEgY29tcGFueSBiZWZvcmUgY3JlYXRpbmcgYSBzYWxlLlwiIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghY3VzdG9tZXJOYW1lIHx8ICFzaGlwcGluZ0FkZHJlc3MpIHtcbiAgICAgICAgdG9hc3QoeyB2YXJpYW50OiBcImRlc3RydWN0aXZlXCIsIHRpdGxlOiBcIk1pc3NpbmcgQ3VzdG9tZXJcIiwgZGVzY3JpcHRpb246IFwiUGxlYXNlIHNlbGVjdCBvciBlbnRlciBjdXN0b21lciBkZXRhaWxzLlwifSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdmFsaWRTYWxlSXRlbXMgPSBzYWxlSXRlbXMuZmlsdGVyKGl0ZW0gPT4gKGl0ZW0ucXVhbnRpdHkgfHwgMCkgPiAwICYmIChpdGVtLnByaWNlIHx8IDApID49IDAgJiYgaXRlbS5zdG9ja0l0ZW1JZCk7XG4gICAgaWYgKHZhbGlkU2FsZUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0b2FzdCh7IHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIiwgdGl0bGU6IFwiSW52YWxpZCBJdGVtc1wiLCBkZXNjcmlwdGlvbjogXCJQbGVhc2UgYWRkIGl0ZW1zIHdpdGggdmFsaWQgcXVhbnRpdHkgYW5kIHByaWNlLlwifSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFzYWxlRGF0ZSkge1xuICAgICAgICB0b2FzdCh7IHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIiwgdGl0bGU6IFwiTWlzc2luZyBEYXRlXCIsIGRlc2NyaXB0aW9uOiBcIlBsZWFzZSBzZWxlY3QgYSBzYWxlIGRhdGUuXCJ9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBsZWRnZXJzSnNvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBsZWRnZXJzXyR7YWN0aXZlQ29tcGFueS5pZH1gKTtcbiAgICAgICAgbGV0IGxlZGdlcnM6IExlZGdlcltdID0gbGVkZ2Vyc0pzb24gPyBKU09OLnBhcnNlKGxlZGdlcnNKc29uKSA6IFtdO1xuICAgICAgICBsZXQgY3VzdG9tZXIgPSBsZWRnZXJzLmZpbmQoYyA9PiBjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gY3VzdG9tZXJOYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBsZXQgY3VzdG9tZXJJZCA9IHNlbGVjdGVkQ3VzdG9tZXJJZDtcbiAgICAgICAgXG4gICAgICAgIGlmICghY3VzdG9tZXIpIHtcbiAgICAgICAgICAgIGN1c3RvbWVySWQgPSBgTEVERy0ke0RhdGUubm93KCl9YDtcbiAgICAgICAgICAgIGNvbnN0IG5ld0xlZGdlcjogTGVkZ2VyID0geyBpZDogY3VzdG9tZXJJZCwgbmFtZTogY3VzdG9tZXJOYW1lLCBncm91cDogJ1N1bmRyeSBEZWJ0b3JzJywgYWRkcmVzczogc2hpcHBpbmdBZGRyZXNzLCBlbWFpbDogJycgfTtcbiAgICAgICAgICAgIGxlZGdlcnMucHVzaChuZXdMZWRnZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VzdG9tZXJJZCA9IGN1c3RvbWVyLmlkO1xuICAgICAgICAgICAgY3VzdG9tZXIuYWRkcmVzcyA9IHNoaXBwaW5nQWRkcmVzcztcbiAgICAgICAgICAgIGxlZGdlcnMgPSBsZWRnZXJzLm1hcChsID0+IGwuaWQgPT09IGN1c3RvbWVySWQgPyBjdXN0b21lciEgOiBsKTtcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbGVkZ2Vyc18ke2FjdGl2ZUNvbXBhbnkuaWR9YCwgSlNPTi5zdHJpbmdpZnkobGVkZ2VycykpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaW52b2ljZURhdGUgPSBzYWxlRGF0ZS50b0lTT1N0cmluZygpO1xuICAgICAgICBjb25zdCBpbnZvaWNlTnVtYmVyID0gYElOVi0ke25ldyBEYXRlKCkuZ2V0VGltZSgpfWA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBsaW5lSXRlbXM6IExpbmVJdGVtW10gPSB2YWxpZFNhbGVJdGVtcy5tYXAoaXRlbSA9PiAoe1xuICAgICAgICAgICAgaWQ6IGl0ZW0uc3RvY2tJdGVtSWQsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7aXRlbS5uYW1lfSAoJHtpdGVtLnNrdX0pYCxcbiAgICAgICAgICAgIHF1YW50aXR5OiBOdW1iZXIoaXRlbS5xdWFudGl0eSksXG4gICAgICAgICAgICBwcmljZTogTnVtYmVyKGl0ZW0ucHJpY2UpLFxuICAgICAgICAgICAgaHNuOiBpdGVtLmhzbixcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGxpbmVJdGVtcy5tYXAoaXRlbSA9PiBgJHtpdGVtLnF1YW50aXR5fXggJHtpdGVtLmRlc2NyaXB0aW9ufWApLmpvaW4oJ1xcbicpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWxsT3JkZXJzSnNvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBvcmRlcnNfJHthY3RpdmVDb21wYW55LmlkfWApO1xuICAgICAgICBjb25zdCBhbGxPcmRlcnM6IE9yZGVyW10gPSBhbGxPcmRlcnNKc29uID8gSlNPTi5wYXJzZShhbGxPcmRlcnNKc29uKSA6IFtdO1xuICAgICAgICBjb25zdCBvcmRlcklkID0gYG9yZC0ke0RhdGUubm93KCl9YDtcblxuICAgICAgICBjb25zdCBuZXdPcmRlckRhdGE6IE9yZGVyID0ge1xuICAgICAgICAgICAgaWQ6IG9yZGVySWQsIGN1c3RvbWVyOiBjdXN0b21lck5hbWUsIGl0ZW06IFwiRGlyZWN0IFN0b2NrIFNhbGVcIiwgc3RhdHVzOiBcIkJpbGxlZFwiLCB0eXBlOiBcIkRlYWxlclwiLCBkZXRhaWxzOiBvcmRlckRldGFpbHMsIGNyZWF0ZWRCeTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsb2dnZWRJblVzZXJcIikgfHwgdW5kZWZpbmVkLCBjcmVhdGVkQXQ6IGludm9pY2VEYXRlLFxuICAgICAgICAgICAgY3VzdG9tZXJJbmZvOiB7IGlkOiBjdXN0b21lcklkISwgbmFtZTogY3VzdG9tZXJOYW1lLCBhZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MsIH0sXG4gICAgICAgICAgICBpbnZvaWNlTnVtYmVyLCBpbnZvaWNlRGF0ZSwgbGluZUl0ZW1zLCBzdWJUb3RhbCwgdG90YWxHc3RSYXRlOiBnc3RSYXRlLCBzZ3N0QW1vdW50LCBjZ3N0QW1vdW50LCB0b3RhbEdzdEFtb3VudCwgdG90YWxBbW91bnQsXG4gICAgICAgICAgICBwYXltZW50czogW10sIHBhaWRBbW91bnQ6IDAsIGJhbGFuY2VEdWU6IHRvdGFsQW1vdW50LCBwYXltZW50U3RhdHVzOiB0b3RhbEFtb3VudCA+IDAgPyBcIlVucGFpZFwiIDogXCJQYWlkXCIsIHN0b2NrRGVkdWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICBpcm46IGBJUk4tTU9DSy0ke25ldyBEYXRlKCkuZ2V0VGltZSgpfWAsXG4gICAgICAgICAgICBxckNvZGVVcmw6ICdodHRwczovL3BsYWNlaG9sZC5jby8xMDB4MTAwLnBuZycsXG4gICAgICAgIH07XG4gICAgICAgIGFsbE9yZGVycy5wdXNoKG5ld09yZGVyRGF0YSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBvcmRlcnNfJHthY3RpdmVDb21wYW55LmlkfWAsIEpTT04uc3RyaW5naWZ5KGFsbE9yZGVycykpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZ2V0U3RhdHVzID0gKHF1YW50aXR5OiBudW1iZXIsIHJlb3JkZXJMZXZlbDogbnVtYmVyKTogU3RvY2tTdGF0dXMgPT4ge1xuICAgICAgICAgICAgaWYgKHF1YW50aXR5IDw9IDApIHJldHVybiBcIk91dCBvZiBTdG9ja1wiO1xuICAgICAgICAgICAgaWYgKHF1YW50aXR5ID4gMCAmJiBxdWFudGl0eSA8PSByZW9yZGVyTGV2ZWwpIHJldHVybiBcIkxvdyBTdG9ja1wiO1xuICAgICAgICAgICAgcmV0dXJuIFwiSW4gU3RvY2tcIjtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhbGxTdG9ja0pzb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgc3RvY2tfaXRlbXNfJHthY3RpdmVDb21wYW55LmlkfWApO1xuICAgICAgICBsZXQgYWxsU3RvY2s6IFN0b2NrSXRlbVtdID0gYWxsU3RvY2tKc29uID8gSlNPTi5wYXJzZShhbGxTdG9ja0pzb24pIDogW107XG5cbiAgICAgICAgdmFsaWRTYWxlSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGFsbFN0b2NrID0gYWxsU3RvY2subWFwKHNpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2kuaWQgPT09IGl0ZW0uc3RvY2tJdGVtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UXVhbnRpdHkgPSBzaS5xdWFudGl0eSAtIE51bWJlcihpdGVtLnF1YW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uc2ksIHF1YW50aXR5OiBuZXdRdWFudGl0eSwgc3RhdHVzOiBnZXRTdGF0dXMobmV3UXVhbnRpdHksIHNpLnJlb3JkZXJMZXZlbCkgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgc3RvY2tfaXRlbXNfJHthY3RpdmVDb21wYW55LmlkfWAsIEpTT04uc3RyaW5naWZ5KGFsbFN0b2NrKSk7XG4gICAgICAgIHNldFN0b2NrSXRlbXMoYWxsU3RvY2spO1xuXG4gICAgICAgIGNvbnN0IGxlZGdlckVudHJpZXNKc29uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYGxlZGdlcl9lbnRyaWVzXyR7YWN0aXZlQ29tcGFueS5pZH1gKTtcbiAgICAgICAgY29uc3QgbGVkZ2VyRW50cmllczogTGVkZ2VyRW50cnlbXSA9IGxlZGdlckVudHJpZXNKc29uID8gSlNPTi5wYXJzZShsZWRnZXJFbnRyaWVzSnNvbikgOiBbXTtcblxuICAgICAgICBjb25zdCBjdXN0b21lckRlYml0RW50cnk6IExlZGdlckVudHJ5ID0geyBpZDogYGxlLSR7RGF0ZS5ub3coKX0tMWAsIGRhdGU6IGludm9pY2VEYXRlLCBhY2NvdW50SWQ6IGN1c3RvbWVySWQhLCBhY2NvdW50TmFtZTogY3VzdG9tZXJOYW1lLCB0eXBlOiAnU2FsZXMnLCBkZXRhaWxzOiBgSW52b2ljZSAke2ludm9pY2VOdW1iZXJ9YCwgZGViaXQ6IHRvdGFsQW1vdW50LCBjcmVkaXQ6IDAsIHJlZklkOiBvcmRlcklkIH07XG4gICAgICAgIGNvbnN0IHNhbGVzQ3JlZGl0RW50cnk6IExlZGdlckVudHJ5ID0geyBpZDogYGxlLSR7RGF0ZS5ub3coKX0tMmAsIGRhdGU6IGludm9pY2VEYXRlLCBhY2NvdW50SWQ6ICdTQUxFU19BQ0NPVU5UJywgYWNjb3VudE5hbWU6ICdTYWxlcyBBY2NvdW50JywgdHlwZTogJ1NhbGVzJywgZGV0YWlsczogYEFnYWluc3QgSW52ICR7aW52b2ljZU51bWJlcn0gdG8gJHtjdXN0b21lck5hbWV9YCwgZGViaXQ6IDAsIGNyZWRpdDogdG90YWxBbW91bnQsIHJlZklkOiBvcmRlcklkIH07XG4gICAgICAgIGxlZGdlckVudHJpZXMucHVzaChjdXN0b21lckRlYml0RW50cnksIHNhbGVzQ3JlZGl0RW50cnkpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbGVkZ2VyX2VudHJpZXNfJHthY3RpdmVDb21wYW55LmlkfWAsIEpTT04uc3RyaW5naWZ5KGxlZGdlckVudHJpZXMpKTtcbiAgICAgICAgXG4gICAgICAgIHNldEludm9pY2VPcmRlcihuZXdPcmRlckRhdGEpO1xuICAgICAgICB0b2FzdCh7IHRpdGxlOiBcIlNhbGUgUmVjb3JkZWQhXCIsIGRlc2NyaXB0aW9uOiBgSW52b2ljZSAke2ludm9pY2VOdW1iZXJ9IGNyZWF0ZWQuYCB9KTtcbiAgICAgICAgXG4gICAgICAgIHNldEN1c3RvbWVyTmFtZShcIlwiKTtcbiAgICAgICAgc2V0U2hpcHBpbmdBZGRyZXNzKFwiXCIpO1xuICAgICAgICBzZXRTZWxlY3RlZEN1c3RvbWVySWQobnVsbCk7XG4gICAgICAgIHNldFNhbGVJdGVtcyhbeyBrZXk6IGBpdGVtLSR7RGF0ZS5ub3coKX1gLCBzdG9ja0l0ZW1JZDogJycsIHNrdTogJycsIG5hbWU6ICcnLCBoc246ICcnLCBxdWFudGl0eTogJycsIHByaWNlOiAnJywgYXZhaWxhYmxlOiAwIH1dKTtcbiAgICAgICAgc2V0U2FsZURhdGUobmV3IERhdGUoKSk7XG4gICAgICAgIHNldE5hcnJhdGlvbihcIlwiKTtcbiAgICB9IGNhdGNoKGVycm9yOiBhbnkpIHtcbiAgICAgICAgdG9hc3QoeyB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLCB0aXRsZTogJ0ZhaWxlZCB0byByZWNvcmQgc2FsZScsIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVQcmludCA9ICgpID0+IHdpbmRvdy5wcmludCgpO1xuICBjb25zdCB0b3RhbFF1YW50aXR5ID0gdXNlTWVtbygoKSA9PiBzYWxlSXRlbXMucmVkdWNlKChhY2MsIGl0ZW0pID0+IGFjYyArIE51bWJlcihpdGVtLnF1YW50aXR5IHx8IDApLCAwKSwgW3NhbGVJdGVtc10pO1xuICBcbiAgaWYgKGlzTG9hZGluZykge1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBzcGFjZS15LTQgcC00IG1kOnAtOCBwdC02XCI+TG9hZGluZy4uLjwvZGl2PjtcbiAgfVxuXG4gIGlmICghaGFzQWNjZXNzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWluLWgtWzgwdmhdIHRleHQtY2VudGVyIHAtNFwiPlxuICAgICAgICA8Q2FyZCBjbGFzc05hbWU9XCJtYXgtdy1tZFwiPlxuICAgICAgICAgIDxDYXJkSGVhZGVyPlxuICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8U2hpZWxkQWxlcnQgY2xhc3NOYW1lPVwidGV4dC1kZXN0cnVjdGl2ZVwiIC8+IEFjY2VzcyBEZW5pZWRcbiAgICAgICAgICAgIDwvQ2FyZFRpdGxlPlxuICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICA8Q2FyZENvbnRlbnQ+PHA+WW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gdmlldyB0aGlzIHBhZ2UuPC9wPjwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgPENhcmRGb290ZXI+PEJ1dHRvbiBvbkNsaWNrPXsoKSA9PiByb3V0ZXIucHVzaChcIi9cIil9PlJldHVybiB0byBEYXNoYm9hcmQ8L0J1dHRvbj48L0NhcmRGb290ZXI+XG4gICAgICAgIDwvQ2FyZD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbiAgXG4gIGlmICghYWN0aXZlQ29tcGFueSkge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWluLWgtWzgwdmhdIHRleHQtY2VudGVyIHAtNFwiPlxuICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT1cIm1heC13LW1kXCI+XG4gICAgICAgICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgPENhcmRUaXRsZT5ObyBDb21wYW55IFNlbGVjdGVkPC9DYXJkVGl0bGU+XG4gICAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgICA8Q2FyZENvbnRlbnQ+PHA+UGxlYXNlIHNlbGVjdCBvciBjcmVhdGUgYSBjb21wYW55IHRvIG1hbmFnZSBzYWxlcy48L3A+PC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgIDxDYXJkRm9vdGVyPjxCdXR0b24gb25DbGljaz17KCkgPT4gcm91dGVyLnB1c2goXCIvbWFuYWdlLWNvbXBhbmllc1wiKX0+R28gdG8gQ29tcGFuaWVzPC9CdXR0b24+PC9DYXJkRm9vdGVyPlxuICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIHNwYWNlLXktNCBwLTQgbWQ6cC04IHB0LTZcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPFNob3BwaW5nQmFnIGNsYXNzTmFtZT1cImgtNyB3LTdcIiAvPlxuICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0cmFja2luZy10aWdodFwiPkRpcmVjdCBTdG9jayBTYWxlPC9oMj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgIFNlbGwgaXRlbXMgZGlyZWN0bHkgZnJvbSB5b3VyIGZpbmlzaGVkIGdvb2RzIGludmVudG9yeS5cbiAgICAgICAgPC9wPlxuICAgICAgICA8U2VwYXJhdG9yIC8+XG4gICAgICAgIFxuICAgICAgICA8Q2FyZCBjbGFzc05hbWU9XCJtdC00XCI+XG4gICAgICAgICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgICA8Q2FyZFRpdGxlPkNyZWF0ZSBTYWxlPC9DYXJkVGl0bGU+XG4gICAgICAgICAgICAgICAgPENhcmREZXNjcmlwdGlvbj5GaWxsIGluIGN1c3RvbWVyIGFuZCBpdGVtIGRldGFpbHMgdG8gZ2VuZXJhdGUgYW4gaW52b2ljZSBpbnN0YW50bHkuPC9DYXJkRGVzY3JpcHRpb24+XG4gICAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIG1kOmdyaWQtY29scy0yIGdhcC00IGl0ZW1zLWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJuYW1lXCI+Q3VzdG9tZXIgTmFtZTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IGlkPVwibmFtZVwiIG5hbWU9XCJuYW1lXCIgcmVxdWlyZWQgdmFsdWU9e2N1c3RvbWVyTmFtZX0gb25DaGFuZ2U9e2hhbmRsZU5hbWVDaGFuZ2V9IG9uQmx1cj17KCkgPT4gc2V0VGltZW91dCgoKSA9PiBzZXRDdXN0b21lclN1Z2dlc3Rpb25zKFtdKSwgMTUwKX0gYXV0b0NvbXBsZXRlPVwib2ZmXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VzdG9tZXJTdWdnZXN0aW9ucy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB6LTEwIHctZnVsbCBtdC0xIGJnLWNhcmQgYm9yZGVyIHJvdW5kZWQtbWQgc2hhZG93LWxnXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTEgcC0xIG1heC1oLTYwIG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXN0b21lclN1Z2dlc3Rpb25zLm1hcChjID0+ICggPGJ1dHRvbiBrZXk9e2MuaWR9IHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHAtMiByb3VuZGVkLW1kIGhvdmVyOmJnLW11dGVkXCIgb25DbGljaz17KCkgPT4gaGFuZGxlU2VsZWN0Q3VzdG9tZXIoYyl9PntjLm5hbWV9PC9idXR0b24+KSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cInNhbGVEYXRlXCI+U2FsZSBEYXRlPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3BvdmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3BvdmVyVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9e1wib3V0bGluZVwifSBjbGFzc05hbWU9e2NuKFwidy1mdWxsIGp1c3RpZnktc3RhcnQgdGV4dC1sZWZ0IGZvbnQtbm9ybWFsXCIsICFzYWxlRGF0ZSAmJiBcInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJJY29uIGNsYXNzTmFtZT1cIm1yLTIgaC00IHctNFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2FsZURhdGUgPyBmb3JtYXQoc2FsZURhdGUsIFwiUFBQXCIpIDogPHNwYW4+UGljayBhIGRhdGU8L3NwYW4+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1BvcG92ZXJUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3BvdmVyQ29udGVudCBjbGFzc05hbWU9XCJ3LWF1dG8gcC0wXCI+PENhbGVuZGFyIG1vZGU9XCJzaW5nbGVcIiBzZWxlY3RlZD17c2FsZURhdGV9IG9uU2VsZWN0PXtzZXRTYWxlRGF0ZX0gaW5pdGlhbEZvY3VzIC8+PC9Qb3BvdmVyQ29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImFkZHJlc3NcIj5TaGlwcGluZyBBZGRyZXNzPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPFRleHRhcmVhIGlkPVwiYWRkcmVzc1wiIG5hbWU9XCJhZGRyZXNzXCIgcmVxdWlyZWQgdmFsdWU9e3NoaXBwaW5nQWRkcmVzc30gb25DaGFuZ2U9e2UgPT4gc2V0U2hpcHBpbmdBZGRyZXNzKGUudGFyZ2V0LnZhbHVlKX0gcm93cz17Mn0gLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxMYWJlbD5TYWxlIEl0ZW1zPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGJvcmRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYmxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUhlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYmxlUm93PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYmxlSGVhZCBjbGFzc05hbWU9XCJ3LVs0MCVdXCI+SXRlbTwvVGFibGVIZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYmxlSGVhZD5IU04vU0FDPC9UYWJsZUhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVIZWFkPlF0eTwvVGFibGVIZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYmxlSGVhZD5SYXRlPC9UYWJsZUhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVIZWFkIGNsYXNzTmFtZT1cInRleHQtcmlnaHRcIj5BbW91bnQ8L1RhYmxlSGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUhlYWQgY2xhc3NOYW1lPVwidy1bNTBweF1cIj48L1RhYmxlSGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UYWJsZVJvdz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYmxlSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzYWxlSXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRhYmxlUm93IGtleT17aXRlbS5rZXl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZSB0byBzZWFyY2ggaXRlbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2l0ZW0ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUl0ZW1DaGFuZ2UoaXRlbS5rZXksICduYW1lJywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRm9jdXM9eygpID0+IHNldEFjdGl2ZUl0ZW1JbnB1dChpdGVtLmtleSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25CbHVyPXsoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHsgc2V0QWN0aXZlSXRlbUlucHV0KG51bGwpOyBzZXRJdGVtU3VnZ2VzdGlvbnMoW10pOyB9LCAxNTApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlSXRlbUlucHV0ID09PSBpdGVtLmtleSAmJiBpdGVtU3VnZ2VzdGlvbnMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB6LTIwIHctZnVsbCBtdC0xIGJnLWNhcmQgYm9yZGVyIHJvdW5kZWQtbWQgc2hhZG93LWxnXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtMSBwLTEgbWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbVN1Z2dlc3Rpb25zLm1hcChzID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17cy5pZH0gY2xhc3NOYW1lPVwicC0yIGhvdmVyOmJnLW11dGVkIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXJcIiBvbk1vdXNlRG93bj17KCkgPT4ge2hhbmRsZUl0ZW1DaGFuZ2UoaXRlbS5rZXksICdzdG9ja0l0ZW1JZCcsIHMuaWQpOyBzZXRJdGVtU3VnZ2VzdGlvbnMoW10pO319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cy5uYW1lfSAoQXZhaWxhYmxlOiB7cy5xdWFudGl0eX0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVDZWxsPjxJbnB1dCBwbGFjZWhvbGRlcj1cIkhTTlwiIHZhbHVlPXtpdGVtLmhzbn0gb25DaGFuZ2U9e2UgPT4gaGFuZGxlSXRlbUNoYW5nZShpdGVtLmtleSwgJ2hzbicsIGUudGFyZ2V0LnZhbHVlKX0gLz48L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVDZWxsPjxJbnB1dCB0eXBlPVwibnVtYmVyXCIgdmFsdWU9e2l0ZW0ucXVhbnRpdHl9IG9uQ2hhbmdlPXtlID0+IGhhbmRsZUl0ZW1DaGFuZ2UoaXRlbS5rZXksICdxdWFudGl0eScsIHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpIHx8IFwiXCIpfSBtaW49XCIxXCIgbWF4PXtpdGVtLmF2YWlsYWJsZSB8fCB1bmRlZmluZWR9IGNsYXNzTmFtZT1cInRleHQtcmlnaHRcIiBwbGFjZWhvbGRlcj1cIjBcIiAvPjwvVGFibGVDZWxsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+PElucHV0IHR5cGU9XCJudW1iZXJcIiB2YWx1ZT17aXRlbS5wcmljZX0gb25DaGFuZ2U9e2UgPT4gaGFuZGxlSXRlbUNoYW5nZShpdGVtLmtleSwgJ3ByaWNlJywgcGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgfHwgXCJcIil9IG1pbj1cIjBcIiBjbGFzc05hbWU9XCJ0ZXh0LXJpZ2h0XCIgcGxhY2Vob2xkZXI9XCIwLjAwXCIgLz48L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVDZWxsIGNsYXNzTmFtZT1cInRleHQtcmlnaHQgZm9udC1tb25vXCI+4oK5eygoTnVtYmVyKGl0ZW0ucXVhbnRpdHkpIHx8IDApICogKE51bWJlcihpdGVtLnByaWNlKSB8fCAwKSkudG9GaXhlZCgyKX08L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVDZWxsPjxCdXR0b24gdmFyaWFudD1cImdob3N0XCIgc2l6ZT1cImljb25cIiBvbkNsaWNrPXsoKSA9PiByZW1vdmVTYWxlSXRlbShpdGVtLmtleSl9IGNsYXNzTmFtZT1cInRleHQtZGVzdHJ1Y3RpdmVcIj48VHJhc2gyIGNsYXNzTmFtZT1cImgtNCB3LTRcIi8+PC9CdXR0b24+PC9UYWJsZUNlbGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYmxlUm93PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RhYmxlQm9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVGFibGU+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwib3V0bGluZVwiIHNpemU9XCJzbVwiIG9uQ2xpY2s9e2FkZFNhbGVJdGVtfSBjbGFzc05hbWU9XCJtdC0yXCI+QWRkIFJvdzwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPFNlcGFyYXRvciAvPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLXN0YXJ0IGp1c3RpZnktYmV0d2VlbiBnYXAtNCBwdC00XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93IHNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJuYXJyYXRpb25cIj5OYXJyYXRpb248L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRhcmVhIGlkPVwibmFycmF0aW9uXCIgdmFsdWU9e25hcnJhdGlvbn0gb25DaGFuZ2U9e2UgPT4gc2V0TmFycmF0aW9uKGUudGFyZ2V0LnZhbHVlKX0gcm93cz17NH0gY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LW1kXCIvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctc20gc3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZFRpdGxlIGNsYXNzTmFtZT1cInRleHQtbGdcIj5TdW1tYXJ5PC9DYXJkVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5Ub3RhbCBRdWFudGl0eTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1vbm9cIj57dG90YWxRdWFudGl0eS50b0ZpeGVkKDIpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+U3VidG90YWw8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tb25vXCI+4oK5e3N1YlRvdGFsLnRvRml4ZWQoMil9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBnYXAtNCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJnc3RSYXRlXCIgY2xhc3NOYW1lPVwid2hpdGVzcGFjZS1ub3dyYXAgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+R1NUIFJhdGUgKCUpPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgaWQ9XCJnc3RSYXRlXCIgdHlwZT1cIm51bWJlclwiIHZhbHVlPXtnc3RSYXRlfSBvbkNoYW5nZT17ZSA9PiBzZXRHc3RSYXRlKHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpIHx8IDApfSBjbGFzc05hbWU9XCJ3LTI0IGgtOFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+U0dTVCAoeyhnc3RSYXRlIC8gMikudG9GaXhlZCgyKX0lKTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1vbm9cIj7igrl7c2dzdEFtb3VudC50b0ZpeGVkKDIpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+Q0dTVCAoeyhnc3RSYXRlIC8gMikudG9GaXhlZCgyKX0lKTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1vbm9cIj7igrl7Y2dzdEFtb3VudC50b0ZpeGVkKDIpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlcGFyYXRvciBjbGFzc05hbWU9XCJteS0xXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgZm9udC1ib2xkIHRleHQtYmFzZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlRvdGFsIEFtb3VudDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1vbm9cIj7igrl7dG90YWxBbW91bnQudG9GaXhlZCgyKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgPENhcmRGb290ZXIgY2xhc3NOYW1lPVwianVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVN1Ym1pdH0gZGlzYWJsZWQ9e3NhbGVJdGVtcy5sZW5ndGggPT09IDAgfHwgdG90YWxBbW91bnQgPD0gMH0+Q3JlYXRlIFNhbGUgJiBJbnZvaWNlPC9CdXR0b24+XG4gICAgICAgICAgICA8L0NhcmRGb290ZXI+XG4gICAgICAgIDwvQ2FyZD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8RGlhbG9nIG9wZW49eyEhaW52b2ljZU9yZGVyfSBvbk9wZW5DaGFuZ2U9eyhpc09wZW4pID0+ICFpc09wZW4gJiYgc2V0SW52b2ljZU9yZGVyKG51bGwpfT5cbiAgICAgICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9XCJzbTptYXgtdy00eGwgbWF4LWgtWzkwdmhdIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgICAgICAgIDxEaWFsb2dUaXRsZT5JbnZvaWNlIEdlbmVyYXRlZDwvRGlhbG9nVGl0bGU+XG4gICAgICAgICAgICAgICAgICA8RGlhbG9nRGVzY3JpcHRpb24+VGhlIG9yZGVyIGlzIG5vdyByZWFkeSBmb3IgZGlzcGF0Y2guIFlvdSBjYW4gcHJpbnQgdGhlIGludm9pY2UgYmVsb3cuPC9EaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICAgIDxkaXYgaWQ9XCJwcmludGFibGUtYXJlYVwiIGNsYXNzTmFtZT1cImZsZXgtZ3JvdyBvdmVyZmxvdy15LWF1dG8gYmctZ3JheS0xMDAgcHJpbnQ6Ymctd2hpdGUgcC00XCI+XG4gICAgICAgICAgICAgICAgICB7aW52b2ljZU9yZGVyICYmIDxJbnZvaWNlIG9yZGVyPXtpbnZvaWNlT3JkZXJ9IGNvbXBhbnk9e2FjdGl2ZUNvbXBhbnl9IC8+fVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPERpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgICAgICAgICAgIDxEaWFsb2dDbG9zZSBhc0NoaWxkPjxCdXR0b24gdmFyaWFudD1cIm91dGxpbmVcIj5DbG9zZTwvQnV0dG9uPjwvRGlhbG9nQ2xvc2U+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVByaW50fT48UHJpbnRlciBjbGFzc05hbWU9XCJtci0yIGgtNCB3LTRcIiAvPiBQcmludCBJbnZvaWNlPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvRGlhbG9nRm9vdGVyPlxuICAgICAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgIDwvRGlhbG9nPlxuICAgIDwvPlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlTWVtbyIsImZvcm1hdCIsIkNhcmQiLCJDYXJkQ29udGVudCIsIkNhcmRIZWFkZXIiLCJDYXJkVGl0bGUiLCJDYXJkRm9vdGVyIiwiQ2FyZERlc2NyaXB0aW9uIiwiQnV0dG9uIiwiSW5wdXQiLCJMYWJlbCIsIlNlcGFyYXRvciIsIlRleHRhcmVhIiwiRGlhbG9nIiwiRGlhbG9nQ29udGVudCIsIkRpYWxvZ0hlYWRlciIsIkRpYWxvZ1RpdGxlIiwiRGlhbG9nRGVzY3JpcHRpb24iLCJEaWFsb2dGb290ZXIiLCJEaWFsb2dDbG9zZSIsIlBvcG92ZXIiLCJQb3BvdmVyQ29udGVudCIsIlBvcG92ZXJUcmlnZ2VyIiwiQ2FsZW5kYXIiLCJ1c2VUb2FzdCIsIlNob3BwaW5nQmFnIiwiUHJpbnRlciIsIkNhbGVuZGFySWNvbiIsIlRyYXNoMiIsIlNoaWVsZEFsZXJ0IiwiSW52b2ljZSIsImNuIiwidXNlUm91dGVyIiwiVGFibGUiLCJUYWJsZUJvZHkiLCJUYWJsZUNlbGwiLCJUYWJsZUhlYWQiLCJUYWJsZUhlYWRlciIsIlRhYmxlUm93IiwidXNlQ29tcGFueSIsIkRpcmVjdFNhbGVQYWdlIiwicm91dGVyIiwidG9hc3QiLCJhY3RpdmVDb21wYW55IiwiYWxsRGVidG9ycyIsInNldEFsbERlYnRvcnMiLCJzdG9ja0l0ZW1zIiwic2V0U3RvY2tJdGVtcyIsImN1c3RvbWVyU3VnZ2VzdGlvbnMiLCJzZXRDdXN0b21lclN1Z2dlc3Rpb25zIiwiaXRlbVN1Z2dlc3Rpb25zIiwic2V0SXRlbVN1Z2dlc3Rpb25zIiwiY3VzdG9tZXJOYW1lIiwic2V0Q3VzdG9tZXJOYW1lIiwic2hpcHBpbmdBZGRyZXNzIiwic2V0U2hpcHBpbmdBZGRyZXNzIiwic2VsZWN0ZWRDdXN0b21lcklkIiwic2V0U2VsZWN0ZWRDdXN0b21lcklkIiwic2FsZUl0ZW1zIiwic2V0U2FsZUl0ZW1zIiwiZ3N0UmF0ZSIsInNldEdzdFJhdGUiLCJzYWxlRGF0ZSIsInNldFNhbGVEYXRlIiwiRGF0ZSIsIm5hcnJhdGlvbiIsInNldE5hcnJhdGlvbiIsImludm9pY2VPcmRlciIsInNldEludm9pY2VPcmRlciIsImFjdGl2ZUl0ZW1JbnB1dCIsInNldEFjdGl2ZUl0ZW1JbnB1dCIsImhhc0FjY2VzcyIsInNldEhhc0FjY2VzcyIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsInJvbGUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY29tcGFueUlkIiwiaWQiLCJsZWRnZXJzSnNvbiIsImxlZGdlcnMiLCJKU09OIiwicGFyc2UiLCJmaWx0ZXIiLCJjIiwiZ3JvdXAiLCJzdG9ja0l0ZW1zSnNvbiIsImFkZFNhbGVJdGVtIiwiaGFuZGxlTmFtZUNoYW5nZSIsImUiLCJ2YWx1ZSIsInRhcmdldCIsImxlbmd0aCIsImZpbHRlcmVkIiwibmFtZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJoYW5kbGVTZWxlY3RDdXN0b21lciIsImN1c3RvbWVyIiwiYWRkcmVzcyIsImN1cnJlbnQiLCJrZXkiLCJub3ciLCJzdG9ja0l0ZW1JZCIsInNrdSIsImhzbiIsInF1YW50aXR5IiwicHJpY2UiLCJhdmFpbGFibGUiLCJyZW1vdmVTYWxlSXRlbSIsIml0ZW0iLCJoYW5kbGVJdGVtQ2hhbmdlIiwiZmllbGQiLCJtYXAiLCJ1cGRhdGVkSXRlbSIsInNlYXJjaFZhbCIsIlN0cmluZyIsInMiLCJzZWxlY3RlZFN0b2NrIiwiZmluZCIsInZhcmlhbnQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic3ViVG90YWwiLCJzZ3N0QW1vdW50IiwiY2dzdEFtb3VudCIsInRvdGFsR3N0QW1vdW50IiwidG90YWxBbW91bnQiLCJzdWIiLCJyZWR1Y2UiLCJhY2MiLCJnc3QiLCJ0b3RhbCIsImhhbmRsZVN1Ym1pdCIsInZhbGlkU2FsZUl0ZW1zIiwiY3VzdG9tZXJJZCIsIm5ld0xlZGdlciIsImVtYWlsIiwicHVzaCIsImwiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiaW52b2ljZURhdGUiLCJ0b0lTT1N0cmluZyIsImludm9pY2VOdW1iZXIiLCJnZXRUaW1lIiwibGluZUl0ZW1zIiwiTnVtYmVyIiwib3JkZXJEZXRhaWxzIiwiam9pbiIsImFsbE9yZGVyc0pzb24iLCJhbGxPcmRlcnMiLCJvcmRlcklkIiwibmV3T3JkZXJEYXRhIiwic3RhdHVzIiwidHlwZSIsImRldGFpbHMiLCJjcmVhdGVkQnkiLCJ1bmRlZmluZWQiLCJjcmVhdGVkQXQiLCJjdXN0b21lckluZm8iLCJ0b3RhbEdzdFJhdGUiLCJwYXltZW50cyIsInBhaWRBbW91bnQiLCJiYWxhbmNlRHVlIiwicGF5bWVudFN0YXR1cyIsInN0b2NrRGVkdWN0ZWQiLCJpcm4iLCJxckNvZGVVcmwiLCJnZXRTdGF0dXMiLCJyZW9yZGVyTGV2ZWwiLCJhbGxTdG9ja0pzb24iLCJhbGxTdG9jayIsImZvckVhY2giLCJzaSIsIm5ld1F1YW50aXR5IiwibGVkZ2VyRW50cmllc0pzb24iLCJsZWRnZXJFbnRyaWVzIiwiY3VzdG9tZXJEZWJpdEVudHJ5IiwiZGF0ZSIsImFjY291bnRJZCIsImFjY291bnROYW1lIiwiZGViaXQiLCJjcmVkaXQiLCJyZWZJZCIsInNhbGVzQ3JlZGl0RW50cnkiLCJlcnJvciIsIm1lc3NhZ2UiLCJoYW5kbGVQcmludCIsIndpbmRvdyIsInByaW50IiwidG90YWxRdWFudGl0eSIsImRpdiIsImNsYXNzTmFtZSIsInAiLCJvbkNsaWNrIiwiaDIiLCJodG1sRm9yIiwicmVxdWlyZWQiLCJvbkNoYW5nZSIsIm9uQmx1ciIsInNldFRpbWVvdXQiLCJhdXRvQ29tcGxldGUiLCJidXR0b24iLCJhc0NoaWxkIiwic3BhbiIsIm1vZGUiLCJzZWxlY3RlZCIsIm9uU2VsZWN0IiwiaW5pdGlhbEZvY3VzIiwicm93cyIsImluZGV4IiwicGxhY2Vob2xkZXIiLCJvbkZvY3VzIiwib25Nb3VzZURvd24iLCJwYXJzZUZsb2F0IiwibWluIiwibWF4IiwidG9GaXhlZCIsInNpemUiLCJkaXNhYmxlZCIsIm9wZW4iLCJvbk9wZW5DaGFuZ2UiLCJpc09wZW4iLCJvcmRlciIsImNvbXBhbnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/direct-sale/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/contexts/company-context.tsx":
/*!******************************************!*\
  !*** ./src/contexts/company-context.tsx ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CompanyProvider: function() { return /* binding */ CompanyProvider; },\n/* harmony export */   useCompany: function() { return /* binding */ useCompany; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ CompanyProvider,useCompany auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\nconst CompanyContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nconst CompanyProvider = (param)=>{\n    let { children } = param;\n    _s();\n    const [companies, setCompanies] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeCompanyId, _setActiveCompanyId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    // This effect runs only once on mount to initialize everything.\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const userRole = localStorage.getItem(\"userRole\");\n        const companiesJson = localStorage.getItem(\"companies\");\n        const allCompanies = companiesJson ? JSON.parse(companiesJson) : [];\n        setCompanies(allCompanies);\n        let initialActiveId = localStorage.getItem(\"activeCompanyId\");\n        if (!initialActiveId && (userRole === \"coordinator\" || userRole === \"factory\") && allCompanies.length > 0) {\n            // Find most recent company and set it as active\n            const sortedCompanies = [\n                ...allCompanies\n            ].sort((a, b)=>new Date(b.financialYearStart).getTime() - new Date(a.financialYearStart).getTime());\n            initialActiveId = sortedCompanies[0].id;\n            localStorage.setItem(\"activeCompanyId\", initialActiveId);\n        }\n        _setActiveCompanyId(initialActiveId);\n        setIsLoading(false);\n    }, []); // Empty dependency array ensures it runs once.\n    const setActiveCompanyId = (id)=>{\n        if (id) {\n            localStorage.setItem(\"activeCompanyId\", id);\n        } else {\n            localStorage.removeItem(\"activeCompanyId\");\n        }\n        _setActiveCompanyId(id);\n        window.location.reload(); // Reload to ensure all components get the new context correctly.\n    };\n    const activeCompany = companies.find((c)=>c.id === activeCompanyId) || null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(CompanyContext.Provider, {\n        value: {\n            companies,\n            activeCompany,\n            setActiveCompanyId,\n            isLoading\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/home/user/studio/src/contexts/company-context.tsx\",\n        lineNumber: 53,\n        columnNumber: 5\n    }, undefined);\n};\n_s(CompanyProvider, \"A+DZgel+piKKrAJwhZKKyO9+gSw=\");\n_c = CompanyProvider;\nconst useCompany = ()=>{\n    _s1();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(CompanyContext);\n    if (context === undefined) {\n        throw new Error(\"useCompany must be used within a CompanyProvider\");\n    }\n    return context;\n};\n_s1(useCompany, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"CompanyProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb250ZXh0cy9jb21wYW55LWNvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFFeUY7QUFVekYsTUFBTUssK0JBQWlCSixvREFBYUEsQ0FBaUNLO0FBRTlELE1BQU1DLGtCQUFrQjtRQUFDLEVBQUVDLFFBQVEsRUFBMkI7O0lBQ25FLE1BQU0sQ0FBQ0MsV0FBV0MsYUFBYSxHQUFHUCwrQ0FBUUEsQ0FBWSxFQUFFO0lBQ3hELE1BQU0sQ0FBQ1EsaUJBQWlCQyxvQkFBb0IsR0FBR1QsK0NBQVFBLENBQWdCO0lBQ3ZFLE1BQU0sQ0FBQ1UsV0FBV0MsYUFBYSxHQUFHWCwrQ0FBUUEsQ0FBQztJQUUzQyxnRUFBZ0U7SUFDaEVDLGdEQUFTQSxDQUFDO1FBQ1IsTUFBTVcsV0FBV0MsYUFBYUMsT0FBTyxDQUFDO1FBQ3RDLE1BQU1DLGdCQUFnQkYsYUFBYUMsT0FBTyxDQUFDO1FBQzNDLE1BQU1FLGVBQTBCRCxnQkFBZ0JFLEtBQUtDLEtBQUssQ0FBQ0gsaUJBQWlCLEVBQUU7UUFDOUVSLGFBQWFTO1FBRWIsSUFBSUcsa0JBQWtCTixhQUFhQyxPQUFPLENBQUM7UUFFM0MsSUFBSSxDQUFDSyxtQkFBb0JQLENBQUFBLGFBQWEsaUJBQWlCQSxhQUFhLFNBQVEsS0FBTUksYUFBYUksTUFBTSxHQUFHLEdBQUc7WUFDekcsZ0RBQWdEO1lBQ2hELE1BQU1DLGtCQUFrQjttQkFBSUw7YUFBYSxDQUFDTSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTSxJQUFJQyxLQUFLRCxFQUFFRSxrQkFBa0IsRUFBRUMsT0FBTyxLQUFLLElBQUlGLEtBQUtGLEVBQUVHLGtCQUFrQixFQUFFQyxPQUFPO1lBQzFJUixrQkFBa0JFLGVBQWUsQ0FBQyxFQUFFLENBQUNPLEVBQUU7WUFDdkNmLGFBQWFnQixPQUFPLENBQUMsbUJBQW1CVjtRQUMxQztRQUVBVixvQkFBb0JVO1FBQ3BCUixhQUFhO0lBQ2YsR0FBRyxFQUFFLEdBQUcsK0NBQStDO0lBRXZELE1BQU1tQixxQkFBcUIsQ0FBQ0Y7UUFDMUIsSUFBSUEsSUFBSTtZQUNKZixhQUFhZ0IsT0FBTyxDQUFDLG1CQUFtQkQ7UUFDNUMsT0FBTztZQUNIZixhQUFha0IsVUFBVSxDQUFDO1FBQzVCO1FBQ0F0QixvQkFBb0JtQjtRQUNwQkksT0FBT0MsUUFBUSxDQUFDQyxNQUFNLElBQUksaUVBQWlFO0lBQzdGO0lBRUEsTUFBTUMsZ0JBQWdCN0IsVUFBVThCLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRVQsRUFBRSxLQUFLcEIsb0JBQW9CO0lBRXZFLHFCQUNFLDhEQUFDTixlQUFlb0MsUUFBUTtRQUFDQyxPQUFPO1lBQUVqQztZQUFXNkI7WUFBZUw7WUFBb0JwQjtRQUFVO2tCQUN2Rkw7Ozs7OztBQUdQLEVBQUU7R0ExQ1dEO0tBQUFBO0FBNENOLE1BQU1vQyxhQUFhOztJQUN4QixNQUFNQyxVQUFVMUMsaURBQVVBLENBQUNHO0lBQzNCLElBQUl1QyxZQUFZdEMsV0FBVztRQUN6QixNQUFNLElBQUl1QyxNQUFNO0lBQ2xCO0lBQ0EsT0FBT0Q7QUFDVCxFQUFFO0lBTldEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9jb250ZXh0cy9jb21wYW55LWNvbnRleHQudHN4PzdhNzUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdHlwZSB7IENvbXBhbnksIFVzZXJSb2xlIH0gZnJvbSAnQC9saWIvdHlwZXMnO1xuXG5pbnRlcmZhY2UgQ29tcGFueUNvbnRleHRUeXBlIHtcbiAgY29tcGFuaWVzOiBDb21wYW55W107XG4gIGFjdGl2ZUNvbXBhbnk6IENvbXBhbnkgfCBudWxsO1xuICBzZXRBY3RpdmVDb21wYW55SWQ6IChpZDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xufVxuXG5jb25zdCBDb21wYW55Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8Q29tcGFueUNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG5leHBvcnQgY29uc3QgQ29tcGFueVByb3ZpZGVyID0gKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pID0+IHtcbiAgY29uc3QgW2NvbXBhbmllcywgc2V0Q29tcGFuaWVzXSA9IHVzZVN0YXRlPENvbXBhbnlbXT4oW10pO1xuICBjb25zdCBbYWN0aXZlQ29tcGFueUlkLCBfc2V0QWN0aXZlQ29tcGFueUlkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgLy8gVGhpcyBlZmZlY3QgcnVucyBvbmx5IG9uY2Ugb24gbW91bnQgdG8gaW5pdGlhbGl6ZSBldmVyeXRoaW5nLlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJSb2xlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2VyUm9sZVwiKSBhcyBVc2VyUm9sZSB8IG51bGw7XG4gICAgY29uc3QgY29tcGFuaWVzSnNvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjb21wYW5pZXMnKTtcbiAgICBjb25zdCBhbGxDb21wYW5pZXM6IENvbXBhbnlbXSA9IGNvbXBhbmllc0pzb24gPyBKU09OLnBhcnNlKGNvbXBhbmllc0pzb24pIDogW107XG4gICAgc2V0Q29tcGFuaWVzKGFsbENvbXBhbmllcyk7XG5cbiAgICBsZXQgaW5pdGlhbEFjdGl2ZUlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZUNvbXBhbnlJZCcpO1xuXG4gICAgaWYgKCFpbml0aWFsQWN0aXZlSWQgJiYgKHVzZXJSb2xlID09PSAnY29vcmRpbmF0b3InIHx8IHVzZXJSb2xlID09PSAnZmFjdG9yeScpICYmIGFsbENvbXBhbmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBGaW5kIG1vc3QgcmVjZW50IGNvbXBhbnkgYW5kIHNldCBpdCBhcyBhY3RpdmVcbiAgICAgIGNvbnN0IHNvcnRlZENvbXBhbmllcyA9IFsuLi5hbGxDb21wYW5pZXNdLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuZmluYW5jaWFsWWVhclN0YXJ0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmZpbmFuY2lhbFllYXJTdGFydCkuZ2V0VGltZSgpKTtcbiAgICAgIGluaXRpYWxBY3RpdmVJZCA9IHNvcnRlZENvbXBhbmllc1swXS5pZDtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY3RpdmVDb21wYW55SWQnLCBpbml0aWFsQWN0aXZlSWQpO1xuICAgIH1cbiAgICBcbiAgICBfc2V0QWN0aXZlQ29tcGFueUlkKGluaXRpYWxBY3RpdmVJZCk7XG4gICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgfSwgW10pOyAvLyBFbXB0eSBkZXBlbmRlbmN5IGFycmF5IGVuc3VyZXMgaXQgcnVucyBvbmNlLlxuXG4gIGNvbnN0IHNldEFjdGl2ZUNvbXBhbnlJZCA9IChpZDogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgIGlmIChpZCkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWN0aXZlQ29tcGFueUlkJywgaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY3RpdmVDb21wYW55SWQnKTtcbiAgICB9XG4gICAgX3NldEFjdGl2ZUNvbXBhbnlJZChpZCk7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOyAvLyBSZWxvYWQgdG8gZW5zdXJlIGFsbCBjb21wb25lbnRzIGdldCB0aGUgbmV3IGNvbnRleHQgY29ycmVjdGx5LlxuICB9O1xuXG4gIGNvbnN0IGFjdGl2ZUNvbXBhbnkgPSBjb21wYW5pZXMuZmluZChjID0+IGMuaWQgPT09IGFjdGl2ZUNvbXBhbnlJZCkgfHwgbnVsbDtcblxuICByZXR1cm4gKFxuICAgIDxDb21wYW55Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBjb21wYW5pZXMsIGFjdGl2ZUNvbXBhbnksIHNldEFjdGl2ZUNvbXBhbnlJZCwgaXNMb2FkaW5nIH19PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvQ29tcGFueUNvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgdXNlQ29tcGFueSA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoQ29tcGFueUNvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VDb21wYW55IG11c3QgYmUgdXNlZCB3aXRoaW4gYSBDb21wYW55UHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn07XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiQ29tcGFueUNvbnRleHQiLCJ1bmRlZmluZWQiLCJDb21wYW55UHJvdmlkZXIiLCJjaGlsZHJlbiIsImNvbXBhbmllcyIsInNldENvbXBhbmllcyIsImFjdGl2ZUNvbXBhbnlJZCIsIl9zZXRBY3RpdmVDb21wYW55SWQiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJ1c2VyUm9sZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJjb21wYW5pZXNKc29uIiwiYWxsQ29tcGFuaWVzIiwiSlNPTiIsInBhcnNlIiwiaW5pdGlhbEFjdGl2ZUlkIiwibGVuZ3RoIiwic29ydGVkQ29tcGFuaWVzIiwic29ydCIsImEiLCJiIiwiRGF0ZSIsImZpbmFuY2lhbFllYXJTdGFydCIsImdldFRpbWUiLCJpZCIsInNldEl0ZW0iLCJzZXRBY3RpdmVDb21wYW55SWQiLCJyZW1vdmVJdGVtIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJhY3RpdmVDb21wYW55IiwiZmluZCIsImMiLCJQcm92aWRlciIsInZhbHVlIiwidXNlQ29tcGFueSIsImNvbnRleHQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/contexts/company-context.tsx\n"));

/***/ })

});